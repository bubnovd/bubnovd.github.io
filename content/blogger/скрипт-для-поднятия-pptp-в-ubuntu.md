+++
title = "Скрипт для поднятия pptp в Ubuntu"
date = 2010-12-06T11:05:00Z
updated = 2011-03-13T09:00:28Z
tags = ["Интернет", "ubuntu", "VPN", "linux", "internet", "PPTP", "Линукс", "Автоматизация"]
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

Каждый раз при включении компа прописыать роутинг и поднимать впн неудобно. Проще написать скрипт, который сделает всё это сам и кинуть его в автозагрузку.<br /><div><a name='more'></a></div><div>Вот скрипт:</div><div><br /><div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">#!/bin/bash &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #указываем кто будет выполнять скрипт (bash)</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">route del default &nbsp; &nbsp; #убираем дефолтный маршрут</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">LOG="/var/log/pptp-run.log" &nbsp; &nbsp; #логи будут писаться в /var/log/pptp-run.log</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">while true;do</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;echo -e "\n==============================================\n `date`" &gt;&gt; $LOG</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;/usr/sbin/pptp vpn.server.ru &gt;&gt; $LOG &nbsp; &nbsp; #вывод сообщений из pptp в pptp-run.log</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;sleep 10;</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">done</span></div></div></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div><span class="Apple-style-span" style="font-family: Arial, Helvetica, sans-serif;">Сохраняем его в /usr/local/bin/pptp-run-sh. Не забываем сделать его исполняемым: </span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">chmod +x pptp-run.sh</span></div><div><span class="Apple-style-span" style="font-family: Arial, Helvetica, sans-serif;">И прописываем в автозагрузку:</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">sudo nano /etc/rc.local</span></div><div><span class="Apple-style-span" style="font-family: Arial, Helvetica, sans-serif;">последней строчкой указываем: </span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;/usr/local/bin/pptp-run.sh</span></div><div><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div><span class="Apple-style-span" style="font-family: Arial, Helvetica, sans-serif;">Всё! Скрипт будет выполняться при запуске системы с правами системы (а может и нет=)), а так же при очередном "отваливании" впн-соединения.&nbsp;</span></div>
