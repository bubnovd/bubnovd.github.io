+++
title = "Режимы бондинга в RouterOS. И не только в RouterOS"
date = 2015-08-25T03:05:00Z
updated = 2015-08-25T03:05:30Z
tags = ["LACP", "balance", "routeros", "Mikrotik", "bonding", "aggregation"]
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

В вики микротика не совсем понятно описано. На <a href="http://habrahabr.ru/post/58218/" target="_blank">хабре</a> об этом сказали лучше:<br /><br /><b style="background-color: white; border: 0px; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">mode=0 (balance-rr)</b><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><span style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;">Последовательно кидает пакеты, с первого по последний интерфейс.&nbsp;</span><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><b style="background-color: white; border: 0px; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">mode=1 (active-backup)</b><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><span style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;">Один из интерфейсов активен. Если активный интерфейс выходит из строя (link down и т.д.), другой интерфейс заменяет активный. Не требует дополнительной настройки коммутатора</span><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><b style="background-color: white; border: 0px; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">mode=2 (balance-xor)</b><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><span style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;">Передачи распределяются между интерфейсами на основе формулы ((MAC-адрес источника) XOR (MAC-адрес получателя)) % число интерфейсов. Один и тот же интерфейс работает с определённым получателем. Режим даёт балансировку нагрузки и отказоустойчивость.</span><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><b style="background-color: white; border: 0px; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">mode=3 (broadcast)</b><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><span style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;">Все пакеты на все интерфейсы</span><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><b style="background-color: white; border: 0px; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">mode=4 (802.3ad)</b><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><span style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;">Link Agregation — IEEE 802.3ad, требует от коммутатора настройки.&nbsp;</span><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><b style="background-color: white; border: 0px; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">mode=5 (balance-tlb)</b><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><span style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;">Входящие пакеты принимаются только активным сетевым интерфейсом, исходящий распределяется в зависимости от текущей загрузки каждого интерфейса. Не требует настройки коммутатора.</span><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><b style="background-color: white; border: 0px; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px; margin: 0px; outline: 0px; padding: 0px; vertical-align: baseline;">mode=6 (balance-alb)</b><br style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;" /><span style="background-color: white; font-family: Verdana, sans-serif; font-size: 14px; line-height: 22.3999996185303px;">Тоже самое что 5, только входящий трафик тоже распределяется между интерфейсами. Не требует настройки коммутатора, но интерфейсы должны уметь изменять MAC.</span>
