+++
title = "Linux Server. 3 Расшариваем папки. NFS"
date = 2011-09-10T10:38:00Z
updated = 2013-05-29T11:30:02Z
tags = ["Linux Server", "NFS", "общие папки", "сеть"]
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

Чтобы файлы с нашего сервера были видны на других Linux-машинах нам потребуется протокол NFS - Network File System - протокол сетевого доступа к файловым системам.<br /><br /><a name='more'></a>Итак, на серв ставим<br /><i><span style="color: #990000;">sudo apt-get install nfs-server nfs-kernel-server nfs-common nfs-client</span></i><br />Создаём папку, которую будем расшаривать<br /><span style="color: #990000;"><i>mkdir ~/share</i></span><br />Настройки хранятся в файле /etc/exports. Мануал по нему: <span style="color: #990000;"><i>man exports</i></span>. Прописываем настройки шары:<span class="Apple-style-span" style="background-color: white; color: #0b5394; font-family: Courier New, Courier, monospace;"> /home/user/share/ 192.168.0.10(rw, sync, no_subtree_check)</span><br />Можно открыть доступ нескольким машинам:<br />&nbsp;<span style="color: #0b5394; font-family: Courier New, Courier, monospace;">/home/user/share/ 192.168.0.10(rw,sync,no_subtree_check) 192.168.0.11(ro,async,no_subtree_check)</span><br />Можно открыть всем * или отдельной подсети 192.168.0.0/255.255.255.0.<br />Опции:<br /><b>rw</b> - чтение (r), запись (w)<br /><b>ro</b> - только чтение (read-only)<br /><b>sync</b> - синхронное поведение файловой системы (файл появился на серве - тут же его видит клиент)<br /><b>async</b> - асинхронное поведение файловой системы<br /><b>no_subtree_check</b> -<a href="http://www.google.ru/search?aq=1&amp;oq=no_s&amp;sourceid=chrome&amp;ie=UTF-8&amp;q=no_subtree_check"> долго объяснять</a>. Вобщем увеличивает скорость.<br />Перезапускаем сервер:<br /><i><span style="color: #990000;">sudo /etc/init.d/nfs-kernel-server restart</span></i><br />При внесении изменений в /etc/exports нужно выполнить команду <i><span style="color: #990000;">exportfs -</span></i><i><span style="color: #990000;">avr</span></i><br /><br /><b><i>Настройки клиента:</i></b><br />Создаём каталог, куда будем монтировать удалённую директорию:<br /><span style="color: #990000;"><i>mkdir /home/user/nfs</i></span><br />Монтируем:<br /><span style="color: #990000;"><i>sudo mount -t nfs 192.168.0.10:/home/user/share /home/user/nfs -rw</i></span><br />sudo mount -t (тип монтирования) IP_сервера:/папка &nbsp;/куда/монтировать -флаги монтирования (в нашем случае запись).<br />Чтобы папка монтировалась при запуске системы, команду монтирования нужно прописать в файл /etc/fstab. Это ещё не делал - гуглите сами.<br /><br /><br />Посмотреть, что открыто на сервере: <i><span style="color: #990000;">sudo exportfs</span></i><br />Проверить, запущен ли NFS: <i><span style="color: #990000;">ps ax | grep nfs</span></i><span style="color: cyan;"> &nbsp; &nbsp;&nbsp;</span>показывает демона<br />или<br /><i><span style="color: #990000;">rpcinfo -p</span></i><span style="color: cyan;"> &nbsp; </span>показывает открытые по RPC порты и процессы<br /><br />Материал взят <a href="http://www.linuxspace.org/archives/2383">отсюда</a> и из журнала LinuxFORMAT.<br /><br /><br />
