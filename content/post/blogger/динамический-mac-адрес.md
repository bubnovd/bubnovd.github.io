+++
title = "Динамический MAC адрес"
date = 2016-10-17T22:56:00Z
updated = 2016-10-17T22:56:48Z
tags = ["китайцы", "texet", "dynamic MAC", "fly"]
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

Нашли интересную багофичу в китайских телефонах.<br />Один из наших &nbsp;телефонов, фирмы fly самопроизвольно меняет MAC-адрес WiFi интерфейса. Моменты смены адреса не отследили, но, скорее всего, это либо ребут аппарата, либо переподключение к точке доступа.<br />В ходе беглого гугления выяснили, что китайцы не заморачиваются регистрацией MAC'ов по стандарту, а тупо сделали динамический.<br /><br />Так же ведут себя дешевые сетевые карты для ПК, в том числе Ethernet. Они прописывают MAC на hdd и при смене ОС MAC адрес ПК меняется. Возможно, есть и такие, которые держат это значение в своей "энергозависимой" памяти.<br /><br />Вот что пишут по этому поводу на <a href="http://4pda.ru/forum/index.php?showtopic=512198&amp;st=560#entry27219089" target="_blank">4pda</a>:<br /><span style="background-color: white;"><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">ИНФОРМАЦИЯ ДЛЯ ТЕХ, КОГО ЗАПАРИЛ ДИНАМИЧЕСКИЙ MAC-АДРЕС WI-FI!</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">Поделюсь своими сегодняшними изысканиями. Похоже, это общая проблема для телефонов "полуподвального Китая": "подвальщики" сильно не заморачиваются тем, что mac-адрес - это уникальный номер и его нужно получать и лицензировать в "Wi-Fi Aliance". Компании Texet, походу, на это наплевать, когда они заказывают партии своих устройств у таких производителей!</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">Когда я сегодня вынул батарейку, для меня было шоком, что на наклейке под ней только два IMEI и ничего о MAC-адресе!</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">Никакой прошивкой или супер-пупер обновлением это не исправить! Потому что Mac-адрес должен быть провисан в NVRAM. Это энергонезависимая память, которая не имеет отношения к прошивке.</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">Есть два РЕШЕНИЯ:</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">1. ПЕРВОЕ РЕШЕНИЕ простое, но частичное: после Wipe данных или перепрошивки Mac-адрес слетит.</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">НУЖЕН ROOT! С помощью Root Explorer идем по пути /data/nvram/APCFG/APRDEB/WIFI. Копируем на компьютер этот файл и открываем в HEX-редакторе. Будет так:</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">04 01 00 00 00 00 00 00 00 00 00 00.....</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">04 01 00 00 не трогаем. А начиная с пятой пары знаков вбиваем MAC-адрес.</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">Типа (для адреса 00:08:22:04:c4:fb):</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">04 01 00 00 00 08 22 04 c4 fb.....</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">Отключаем на телефоне Wi-Fi и переименовываем исходный файл (например, в WIFI.old). После этого закидываем туда отредактированный файл с компьютера. Перезагружаемся и включаем Wi-Fi. Теперь после перезагрузок Mac-адрес будет неизменным.</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">2. ВТОРОЕ РЕШЕНИЕ: прошить Mac-адрес в NVRAM с помощью "SN Write Tool". Это, видимо, то что предлагают сделать в СЦ. Решение более правильное. Root не требуется. Mac-адрес останется навсегда. Но при неправильных действиях можно получить "кирпич"!!!</span><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><br style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;" /><span style="color: #222222; font-family: Verdana, Tahoma, Arial, &quot;Trebuchet MS&quot;, sans-serif, Georgia, Courier, &quot;Times New Roman&quot;, serif; font-size: 12px;">ЗЫ: Себе сделал по 1-му варианту. Для второго варианта, в "SN Write Tool", нужно указывать на Modem Database и AP Database в прошивке. Разбираться времени нет и лень. Да и первый вариант меня устроил!</span></span>
