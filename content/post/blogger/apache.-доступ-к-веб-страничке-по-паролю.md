+++
title = "Apache. Доступ к веб-страничке по паролю"
date = 2011-10-03T21:12:00Z
updated = 2013-05-29T11:21:35Z
tags = ["безопасность", "пароль", "apache", "доступ"]
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

Запрет на доступ к сайту или определенным страницам на сервере можно установить средствами самого веб-сервера. Для этого нужно поправить файлы конфигурации веб-сервера и создать пользователя веб-сервера (Не системы!), которому будет разрешен доступ. Дальнейшее описание будет приводиться на примере Ubuntu Server 11.04, Apache 2.2.17. Правка конфигов на примере доступа к веб-статистике LightSquid. Перед любым изменением конфигурационных файлов необходимо создать их резервную копию - cp config config.old или mv config config.old. Вариант, приведенный здесь не претендует на правильность и безопасность. Это просто "чтобы работало".<br /><br />Файлы конфигурации лежат в директории <span style="color: #0b5394;">/etc/apache2/sites-available/</span>. Для простейшей настройки входа по паролю требуется в описание хоста добавить следующие строки:<br /><br /><span style="color: #0b5394; font-family: Courier New, Courier, monospace;">AuthType basic</span>    #тип авторизации. basic-пароль будет передаваться без шифрования. Есть вариант с шифрованием<br /><br /><br /><span style="color: #0b5394; font-family: Courier New, Courier, monospace;">AuthName "Registered users only" </span>    #строка сообщения, показываемого пользователю при вводе учетных данных<br /><br /><br /><span style="color: #0b5394; font-family: Courier New, Courier, monospace;">AuthUserFile /var/www/.htpasswd </span>    #путь к файлу с учетными данными<br /><br /><br /><span style="color: #0b5394; font-family: Courier New, Courier, monospace;">Require valid-user </span>    #не открывать доступ, пока пользователь не авторизуется<br /><br />Вот что у меня получилось:<br /><br /><span style="color: #0b5394; font-family: Courier New, Courier, monospace;">&lt;VirtualHost *:80&gt;<br /> DocumentRoot /var/www/html/lightsquid<br /> ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/</span><div><span style="color: #0b5394; font-family: Courier New, Courier, monospace;"><br /> &lt;Directory "/usr/lib/cgi-bin"&gt;<br /> AllowOverride None<br />Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch<br />Order allow,deny<br />Allow from all<br />&lt;/Directory&gt;<br /><br /> &lt;Directory "/var/www/html/lightsquid"&gt;<br />AddHandler cgi-script .cgi<br />Options ExecCGI Indexes FollowSymLinks MultiViews<br />AllowOverride All<br />Allow from all<br />Order allow,deny<br />AuthType basic<br />AuthName "Registered users only"<br />AuthUserFile /var/www/.htpasswd<br />Require valid-user<br />&lt;/Directory&gt;<br /><br />&lt;/VirtualHost&gt;</span><br /><br /><br />Далее следует добавить пользователя командой <i><span style="color: #990000;">htpasswd -c /var/www/.htpasswd username</span></i> Здесь ключ -c заставляет создать (create) файл с данными. При добавлении следующих пользователей этот ключ не нужен.</div>
