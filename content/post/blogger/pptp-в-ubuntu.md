+++
title = "PPTP в Ubuntu"
date = 2010-09-30T09:37:00Z
updated = 2011-01-19T10:06:45Z
tags = ["Интернет", "ubuntu", "VPN", "linux", "PPTP", "Линукс"]
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

Я знаком с линукс-системами не так уж давно (около полугода). После установки возник резонный вопрос: "Как здесь поднять инет?". Роутера у меня дома нет. Пров раздаёт инет по VPN(PPTP).<br />Когда у меня стоял Sabayon - было попроще, чем сейчас. Из под винды качается софтина KVPNC. &nbsp; Потом в линухе она устанавливается(уже не помню как в сабайоне). В окошке прописывается тип подключения и адрес впн-сервера. На этом всё работает!<br />Под убунтой было сложнее. Окружение у меня - гном. А волшебная программка под ним не канает. Пришлось извращаться. Была перечитана куча страниц, выданных гуглом, и справка моего прова. А так как в линуксе я нуб - это был для меня бесполезный набор букв.<br /><br /><a name='more'></a><br /><br />Итак, <b>инструкция</b>.<br /><br /><ol><li>Нужны пакеты pptp (это клиент для VPN подключения) и pppd (демон протокола ppp). В Ubuntu 10.04 они включены по умолчанию.</li><li>В фаил /etc/ppp/options вносим следующие изменения (предварительно забэкапив его). &nbsp;&nbsp;</li></ol>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; color: #333333; font-size: 12px; line-height: 15px;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">local</span></span><br /><ol></ol><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; color: #333333; font-size: 12px; line-height: 15px;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp;lock<br />&nbsp;&nbsp; &nbsp; &nbsp;nodetach<br /><br />&nbsp;&nbsp; &nbsp; &nbsp;mtu 1512<br />&nbsp;&nbsp; &nbsp; &nbsp;mru 1512<br /><br />&nbsp;&nbsp; &nbsp; &nbsp;require-mppe-40<br />&nbsp;&nbsp; &nbsp; &nbsp;require-mppe-128<br />&nbsp;&nbsp; &nbsp; &nbsp;require-mppe<br /><br />&nbsp;&nbsp; &nbsp; &nbsp;lcp-echo-interval 30<br />&nbsp;&nbsp; &nbsp; &nbsp;lcp-echo-failure 5<br /><br />&nbsp;&nbsp; &nbsp; &nbsp;require-mschap-v2<br />&nbsp;&nbsp; &nbsp; &nbsp;refuse-pap<br />&nbsp;&nbsp; &nbsp; &nbsp;refuse-chap<br />&nbsp;&nbsp; &nbsp; &nbsp;refuse-mschap<br />&nbsp;&nbsp; &nbsp; &nbsp;refuse-eap<br /><br />&nbsp;&nbsp; &nbsp; &nbsp;defaultroute<br /><br />&nbsp;&nbsp; &nbsp; &nbsp;user ВАШ_ЛОГИН<br />&nbsp;&nbsp; &nbsp; &nbsp;noauth</span></span><br /><span class="Apple-style-span" style="color: #333333;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; line-height: 15px;"><span class="Apple-style-span" style="font-family: Georgia, 'Times New Roman', serif;"><br /></span></span></span><br /><span class="Apple-style-span" style="color: #333333;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; line-height: 15px;"><span class="Apple-style-span" style="font-family: Georgia, 'Times New Roman', serif;">Подробнее про параметры:</span></span></span><br /><span class="Apple-style-span" style="color: #333333; font-family: Georgia, 'Times New Roman', serif;"><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px; line-height: 15px;"><i>lock</i> - э</span></span><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;">тот параметр указывает pppd заблокировать последовательный порт перед тем, как его открыть;</span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><i>nodetach</i> - э</span><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;">тот параметр указывает pppd не отсоединятся от терминала, с которого он был запущен;</span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><i>mtu, mru</i> - Максимальный размер блока(в байтах), который может быть передан/принят на канальном уровне OSI. Можно подсмотреть в свойствах подключения из под винды;</span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><i>pap, chap, mschap, eap</i> - виды шифрования. Именно из-за них мой Lucid не хотел подключаться. Пришлось по очереди комментить их и проверять.</span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;">Про остальные ничего сказать не могу.</span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><br /></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;">&nbsp;&nbsp;3. Фаил /etc/ppp/chap-secrets должен быть таким: логин * "пароль" *</span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;">Именно так! (логин пробел звездочка кавычка пароль кавычка пробел звездочка). На редактирование надо обладать правами суперюзера. Мне нравится редактор nano, поэтому <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">sudo nano chap-secrets</span></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><br /></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;">&nbsp;&nbsp;4. &nbsp;<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">sudo chmod 400 chap-secrets&nbsp;</span></span><br /><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="font-family: Georgia, 'Times New Roman', serif;">&nbsp;&nbsp;</span><span class="Apple-style-span" style="font-family: inherit;">5. Дальше мой провайдер рекомендует редактировать таблицу маршрутиризации. Но это уж у каждого своё. Кому-то надо, кому-то нет.</span></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="font-family: inherit;"><br /></span></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="font-family: inherit;">&nbsp;&nbsp;6. Соединение устанавливается так: </span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">sudo pptp имя.сервера.ру</span></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="font-family: inherit;"><br /></span></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="font-family: inherit;"><i>Ходить по каталогам из терминала - </i></span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><i>cd</i></span><span class="Apple-style-span" style="font-family: inherit;"><i>&nbsp;.</i></span></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="font-family: inherit;"><br /></span></span><br /><span class="Apple-style-span" style="-webkit-border-horizontal-spacing: 2px; -webkit-border-vertical-spacing: 2px;"><span class="Apple-style-span" style="font-family: Georgia, 'Times New Roman', serif;">Сам в линухе далеко не гуру. Поэтому не обессудьте, если где-то будет ошибка. Свой инет поднимал именно так. Про параметры взято <a href="http://sysoev.ru/pppd/dial.html">отсюда</a>.&nbsp;</span></span>
