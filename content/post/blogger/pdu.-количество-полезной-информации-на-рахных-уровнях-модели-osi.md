+++
title = "PDU. Количество полезной информации на рахных уровнях модели OSI"
date = 2015-09-30T22:12:00Z
updated = 2015-09-30T22:12:31Z
tags = ["PDU", "MSS", "MTU"]
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

PDU (Protocol Data Unit) - общий блок данных протокола (полезные данные + заголовки) (<a href="https://ru.wikipedia.org/wiki/Maximum_transmission_unit#.D0.A1.D0.BC._.D1.82.D0.B0.D0.BA.D0.B6.D0.B5" target="_blank">wikipedia</a>). &nbsp;Своими словами - часть блока данных, в которой содержится информация верхнего уровня (для IP - часть пакета, где лежит TCP/UDP, для TCP/UDP - часть сегмента/датаграммы, где лежит информация прикладного уровня).<br />MTU (Maximum Transmission Unit) - максимальный размер полезного блока данных одного пакета (PDU)<br /><br /><a name='more'></a>Например, IP-пакет. <a href="https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D0%BA%D0%B5%D1%82_(%D1%81%D0%B5%D1%82%D0%B5%D0%B2%D1%8B%D0%B5_%D1%82%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D0%B8)#.D0.9F.D1.80.D0.B8.D0.BC.D0.B5.D1.80:_IP_.D0.BF.D0.B0.D0.BA.D0.B5.D1.82" target="_blank">Wiki </a>говорит так:<br /><div style="background-color: white; color: #252525; font-family: sans-serif; font-size: 14px; line-height: 22.4px; margin-bottom: 0.5em; margin-top: 0.5em;"><a href="https://ru.wikipedia.org/wiki/IP" style="background: none; color: #0b0080; text-decoration: none;" title="IP">IP</a>-пакеты состоят из заголовка и полезной нагрузки. Заголовок пакета&nbsp;<a href="https://ru.wikipedia.org/wiki/IPv4" style="background: none; color: #0b0080; text-decoration: none;" title="IPv4">IPv4</a>&nbsp;состоит из:</div><ol style="background-color: white; color: #252525; font-family: sans-serif; font-size: 14px; line-height: 22.4px; list-style-image: none; margin: 0.3em 0px 0px 3.2em; padding: 0px;"><li style="margin-bottom: 0.1em;">4 бита содержат&nbsp;<i>версию</i>&nbsp;пакета: IPv4 или IPv6.</li><li style="margin-bottom: 0.1em;">4 бита содержат&nbsp;<i>длину интернет-заголовка</i>, которая измеряется отрезками по 4 байта (например, 5 означает 20 байт).</li><li style="margin-bottom: 0.1em;">8 бит содержат&nbsp;<i>тип обслуживания</i>, известный также как качество обслуживания (<a href="https://ru.wikipedia.org/wiki/QoS" style="background: none; color: #0b0080; text-decoration: none;" title="QoS">QoS</a>), описывающее приоритеты пакета.</li><li style="margin-bottom: 0.1em;">16 бит содержат&nbsp;<i>длину</i>&nbsp;пакета в байтах.</li><li style="margin-bottom: 0.1em;">16 бит содержат&nbsp;<i>тег идентификации</i>, помогающие восстановить пакет из нескольких фрагментов.</li><li style="margin-bottom: 0.1em;">3 бита содержат нуль, флаг разрешения&nbsp;<i>фрагментации</i>&nbsp;пакета (DF: не фрагментировать), а также флаг разрешения дальнейшей фрагментации (MF: фрагментировать дальше).</li><li style="margin-bottom: 0.1em;">13 бит содержат&nbsp;<i>смещение фрагмента</i>, поле для идентификации положение фрагмента в исходном пакете.</li><li style="margin-bottom: 0.1em;">8 бит содержат&nbsp;<i><a href="https://ru.wikipedia.org/wiki/Time_to_live" style="background: none; color: #0b0080; text-decoration: none;" title="Time to live">время жизни</a></i>&nbsp;(TTL), которое определяет количество переходов (через маршрутизаторы, компьютеры и сетевые устройства), разрешённых пройти пакету, прежде чем он исчезнет (например, пакету с TTL 16 разрешено пройти не более 16 маршрутизаторов, чтобы добраться до места назначения).</li><li style="margin-bottom: 0.1em;">8 бит содержат&nbsp;<i>протокол</i>&nbsp;(TCP, UDP, ICMP и&nbsp;т.&nbsp;д.).</li><li style="margin-bottom: 0.1em;">16 бит содержат&nbsp;<i>контрольную сумму заголовка</i>, используемую при обнаружении ошибок.</li><li style="margin-bottom: 0.1em;">32 бит содержат&nbsp;<i>IP-адрес источника</i>.</li><li style="margin-bottom: 0.1em;">32 бит содержат&nbsp;<i>адрес назначения</i>.</li></ol><div style="background-color: white; color: #252525; font-family: sans-serif; font-size: 14px; line-height: 22.4px; margin-bottom: 0.5em; margin-top: 0.5em;">После этих данных могут быть добавлены разное количество необязательных флагов, меняющиеся в зависимости от используемого протокола, затем идут данные, которые переносит пакет. IP-пакет не имеет хвостового прицепа. Однако, IP-пакеты часто переносятся как полезная нагрузка внутри фрейма Ethernet, который имеет свой собственный заголовок и хвост.</div><div style="background-color: white; color: #252525; line-height: 22.4px; margin-bottom: 0.5em; margin-top: 0.5em;"><span style="font-family: inherit;">Те данные, которые переносятся пакетом и есть PDU. А его максимальный размер - MTU.</span></div><div style="background-color: white; color: #252525; line-height: 22.4px; margin-bottom: 0.5em; margin-top: 0.5em;"><span style="font-family: inherit;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/UDP_encapsulation.svg/260px-UDP_encapsulation.svg.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/UDP_encapsulation.svg/260px-UDP_encapsulation.svg.png" /></a></div><div class="separator" style="clear: both; text-align: left;">На картинке видны PDU разных уровней. Блок данных, в которых есть data и есть PDU.</div>Для модели OSI выделяют следующие PDU:<br /><br /><ul><li>Уровень 1 (физический/physical) - бит/bit</li><li>Уровень 2 (канальный/data link) - кадр/frame</li><li>Уровень 3 (сетевой/network) - пакет/packet</li><li>Уровень 4 (транспортный/transport) - сегмент/segment для TCP, датаграмма/datagram для UDP</li><li>Уровни 5-7 (прикладной/application) - данные/data</li></ul><br /><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="http://habrastorage.org/getpro/habr/post_images/727/e46/9b7/727e469b76bd68a38f0671128ed9c6af.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://habrastorage.org/getpro/habr/post_images/727/e46/9b7/727e469b76bd68a38f0671128ed9c6af.jpg" height="195" width="400" /></a></div><br /><br /><br />Рассмотрим каждый уровень подробнее.<br /><br />2. Payload (полезная нагрузка) канального уровня содержит 46-1500 байт. В эту полезную нагрузку входит блок данных более высоко уровня, один из частных (и наиболее распространенный) PDU для L2 - IP. Соответственно, MTU - 1500<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/Ethernet_Type_II_Frame_format.svg/700px-Ethernet_Type_II_Frame_format.svg.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="70" src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/13/Ethernet_Type_II_Frame_format.svg/700px-Ethernet_Type_II_Frame_format.svg.png" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">3. Заголовки сетевого уровня составляют 40 байт, соответственно максимальный размер PDU &nbsp;(в терминологии этого уровня называется MSS - Maximum Segment Size) равен 1500 (MTU более низкого уровня) - 40 (заголовки) = 1460</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">4. На следующем уровне MTU определяется размером заголовков.</div>
