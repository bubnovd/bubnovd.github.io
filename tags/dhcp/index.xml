<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DHCP on Админская фамилия</title><link>https://bubnovd.net/tags/dhcp/</link><description>Recent content in DHCP on Админская фамилия</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 18 Jul 2017 04:02:00 +0000</lastBuildDate><atom:link href="https://bubnovd.net/tags/dhcp/index.xml" rel="self" type="application/rss+xml"/><item><title>DHCP Failover with RouterOS</title><link>https://bubnovd.net/blogger/dhcp-failover-with-routeros/</link><pubDate>Tue, 18 Jul 2017 04:02:00 +0000</pubDate><guid>https://bubnovd.net/blogger/dhcp-failover-with-routeros/</guid><description/><content>&lt;!-- raw HTML omitted --></content></item><item><title>Что почитать после второго дня MTCNA</title><link>https://bubnovd.net/blogger/%D1%87%D1%82%D0%BE-%D0%BF%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C-%D0%BF%D0%BE%D1%81%D0%BB%D0%B5-%D0%B2%D1%82%D0%BE%D1%80%D0%BE%D0%B3%D0%BE-%D0%B4%D0%BD%D1%8F-mtcna/</link><pubDate>Tue, 22 Nov 2016 08:34:00 +0000</pubDate><guid>https://bubnovd.net/blogger/%D1%87%D1%82%D0%BE-%D0%BF%D0%BE%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C-%D0%BF%D0%BE%D1%81%D0%BB%D0%B5-%D0%B2%D1%82%D0%BE%D1%80%D0%BE%D0%B3%D0%BE-%D0%B4%D0%BD%D1%8F-mtcna/</guid><description>Общая информацияIP адресMAC адресARP и ARP SpoofingDHCP. Он не так прост как кажется. Если есть желание, то можно забить себе голову всякими REQUEST/REPLY - миBridgeПочему нельзя сделать прозрачный мост на Wireless Station и что означают разные режимы WLANBridgeSwitchRoutingРоутинг в картинках. Читать первую треть статьи. До слов &amp;ldquo;Итак, с маршрутами разобрались&amp;quot;RoutingНеплохо бы ещё взглянуть на Traffic Flow Diagram</description><content>&lt;p>Общая информация&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->IP адрес&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->MAC адрес&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ARP&lt;!-- raw HTML omitted --> и &lt;!-- raw HTML omitted -->ARP Spoofing&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->DHCP&lt;!-- raw HTML omitted -->. Он не так прост как кажется. Если есть желание, то можно забить себе голову всякими REQUEST/REPLY - ми&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Bridge&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Почему нельзя сделать прозрачный мост на Wireless Station и что означают разные режимы WLAN&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Bridge&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Switch&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Routing&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Роутинг в картинках&lt;!-- raw HTML omitted -->. Читать первую треть статьи. До слов &amp;ldquo;&lt;!-- raw HTML omitted -->Итак, с маршрутами разобрались&lt;!-- raw HTML omitted -->&amp;quot;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Routing&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Неплохо бы ещё взглянуть на &lt;!-- raw HTML omitted -->Traffic &lt;!-- raw HTML omitted -->Flow &lt;!-- raw HTML omitted -->Diagram&lt;!-- raw HTML omitted -->&lt;/p></content></item><item><title>DHCP, Option 82</title><link>https://bubnovd.net/blogger/dhcp-option-82/</link><pubDate>Mon, 09 Nov 2015 03:38:00 +0000</pubDate><guid>https://bubnovd.net/blogger/dhcp-option-82/</guid><description>Встала задача: определять на каком порту какого свитча находится конкретный IP-адрес. На самом деле задача глобальнее, но сейчас имеет смысл именно это. В ходе гугления вышел на DHCP Option 82. Инфы много, но кроме теории важно это.Суть в том, что коммутатор в запрос DHCP добавляет два поля: Agent Remote ID (идентификатор коммутатора) и Agent Circuit ID (идентификатор порта). Казалось бы, всё просто. Но я столкнулся с некоторыми трудностями.Дело в том, что сеть поделена на сегменты для улучшения безопасности, выделения потоков трафика и уменьшения широковещательного трафика.</description><content>&lt;p>Встала задача: определять на каком порту какого свитча находится конкретный IP-адрес. На самом деле задача глобальнее, но сейчас имеет смысл именно это. В ходе гугления вышел на DHCP Option 82. Инфы много, но кроме &lt;!-- raw HTML omitted -->теории&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->важно&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->это&lt;!-- raw HTML omitted -->.&lt;!-- raw HTML omitted -->Суть в том, что коммутатор в запрос DHCP добавляет два поля: Agent Remote ID (идентификатор коммутатора) и Agent Circuit ID (идентификатор порта). Казалось бы, всё просто. Но я столкнулся с некоторыми трудностями.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Дело в том, что сеть поделена на сегменты для улучшения безопасности, выделения потоков трафика и уменьшения широковещательного трафика. Каждый сегмент имеет свою адресацию и, соответственно, свой DHCP-сервер.&lt;!-- raw HTML omitted -->Чтобы настроить работу Option 82, коммутатор необходимо настроить как DHCP-relay. Это значит, что при получении DHCP request&amp;rsquo;a коммутатор просто отправит этот запрос DHCP серверу, указанному в настройках релея. Таким образом можно уменьшить количество широковещательного трафика в пределах сегмента и иметь один DHCP сервер на несколько подсетей. Но, DHCP-relay может работать только с одним DHCP-сервером (указанным в настройках релея), соответственно, все наши сегменты получат адреса из одной подсети, что&lt;!-- raw HTML omitted -->нас совсем не устраивает.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Умные инженеры придумали для этого т.н. DHCP Snooping или DHCP Local Relay в терминологии D-Link&amp;rsquo;a. Просто указываем VLAN&amp;rsquo;ы в которых будет работать Relay и правим параметры Option 82 если требуется.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->На DHCP-сервере (в моем случае Mikrotik RouterOS) в полях Agent Remote/Circuit ID получаем коммутатор и порт, на котором висит наш адрес. В более продвинутых DHCP серверах на основе этой информации можно очень тонко сконфигурировать работу DHCP.&lt;!-- raw HTML omitted -->Так это выглядит в DHCP Leases Mikrotik. В поле Agent Circuit ID последние 2 символа - шестнадцатеричный номер порта.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Спасибо Никита Писарев aka mastakid  и blackc за разжевывание&lt;/p></content></item></channel></rss>