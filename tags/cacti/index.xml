<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>cacti on Bubnovd</title><link>https://bubnovd.github.io/tags/cacti/</link><description>Recent content in cacti on Bubnovd</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 01 Mar 2014 02:21:00 +0000</lastBuildDate><atom:link href="https://bubnovd.github.io/tags/cacti/index.xml" rel="self" type="application/rss+xml"/><item><title>Cacti + Mikrotik = Full Monitoring</title><link>https://bubnovd.github.io/blogger/cacti--mikrotik--full-monitoring/</link><pubDate>Sat, 01 Mar 2014 02:21:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/cacti--mikrotik--full-monitoring/</guid><description>Захотелось мне собирать все логи с сетевого оборудования в одном месте. Решил поднять syslog-сервер. Так как с такими сервисами никогда не сталкивался, пришлось спросить у великого гугля. Он подсказал мне, что с этим неплохо справляется система мониторинга Cacti. А о ней то я уже наслышан, и в планах стояло внедрение сего чуда в сеть. Итак, теперь основная цель не сислог, а мониторинг - то, для чего и создан cacti. Настроим мониторинг, а потом примемся за сислог.</description><content>&lt;p>&lt;!-- raw HTML omitted -->Захотелось мне собирать все логи с сетевого оборудования в одном месте. Решил поднять syslog-сервер. Так как с такими сервисами никогда не сталкивался, пришлось спросить у великого гугля. Он подсказал мне, что с этим неплохо справляется система мониторинга Cacti. А о ней то я уже наслышан, и в планах стояло внедрение сего чуда в сеть. Итак, теперь основная цель не сислог, а мониторинг - то, для чего и создан cacti. Настроим мониторинг, а потом примемся за сислог.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Система мониторинга Cacti разрабатывалась с целью визуализации данных, поэтому сравнивать её с другими будет несколько неуместно. Я для мониторинга активности устройств использую The Dude. И советую её всем, у кого сеть построена на микротиках, т.к. разработана она этой компанией, и, соответственно, умеет полностью управлять Mikrotik&amp;rsquo;ом. Но об этом в следующей статье.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Итак, cacti можно установить на Windows и UNIX-like системы. Для работы ей нужны:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->web-server (apache 2.2)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->database server (mySQL 5.6)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->php (php 5.4)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->RRDTool (1.4.8)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->net-snmp (5.7)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->В скобках указаны версии, установленные мной на FreeBSD 10.0 (запущенной под Hyper-V в Windows 2012). Процесс установки подробно расписывать не буду. Я руководствовался этими ресурсами:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Установка Cacti (краткая заметка) &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Кактус у монитора или ускоренная установка cacti&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Cacti – простой и удобный инструмент для мониторинга и анализа сети&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> Я давно не работал с UNIX-like системами, поэтому возникли некоторые проблемы (будьте осторожны выбирая пакеты, которые тянет php. Он может вытянуть иксы). Для тех, кто впервые ставит LAMP, советую почитать мануалы по установке и конфигурированию сервисов. &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ставим &lt;!-- raw HTML omitted -->плагин&lt;!-- raw HTML omitted --> для работы с Mikrotik (копируем папку в /usr/share/local/cacti/plugins и идем в веб-интерфейсе кактуса в Configuration - Plugin Management и нажимаем Install, Activate). При его установке выпадает ошибка. Лечится удалением строки &amp;lsquo;Invalid round robin archive&amp;rsquo; из /usr/local/share/cacti/plugins/mikrotik/templates/cacti_host_template_mikrotik_device.xml.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Настраиваем SNMP на Mikrotik. IP -&amp;gt; SNMP -&amp;gt; Communities. Использовать стандартный public не рекомендую, т.к. он передаёт данные в открытом виде и без авторизации. Мы будем использовать SNMP v3, поддерживающий авторизацию и шифрование. Добавляем новую community:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->имя - любое (cacti) &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Addresses - адрес сервера SNMP (на котором стоит cacti)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Security - authorized&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Read/write - выбираем по своему усмотрению, read нужен обязательно, а write только если планируем конфигурировать роутер по SNMP протоколу&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Протоколы авторизации и шифрования оставляем дефолтные&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Задаём пароль авторизации и парольную фразу для шифрования (могут быть разные значения)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->В SNMP Settings пишем:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Contact Info - почта админа&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Location - физическое расположение устройства&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Trap Target - адрес SNMP сервера&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Выбираем созданную нами Trap Community&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Trap Version - 3&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Trap Generation - кто будет генерировать сообщения для сервера - интерфейс или встроенный сервер&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Выбираем нужные интерфейсы&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Добавляем в cacti наш микротик. Подробно распишу только про SNMP options:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SNMP Version - 3&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SNMP Username (v3) -  имя нашего Community (cacti)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SNMP Password (v3) - то, что ввели в Authentication Password в Mikrotik&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SNMP Privacy Passphrase (v3) - Encryption Password в Mikrotik&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->По дальнейшей работе с кактусом полно мануалов. Также есть отличная документация на оф. сайте, правда на английском. &lt;!-- raw HTML omitted -->Презентация&lt;!-- raw HTML omitted --> о настройке SNMP на Mikrotik.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Первый час работы кактуса:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->За сим откланяюсь. Постараюсь сочинить что-нибудь про The Dude. Да и про кактус, когда сам в нем разберусь.&lt;!-- raw HTML omitted -->&lt;/p></content></item></channel></rss>