<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>cmd on Админская фамилия</title><link>https://bubnovd.net/tags/cmd/</link><description>Recent content in cmd on Админская фамилия</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 09 Jul 2013 07:31:00 +0000</lastBuildDate><atom:link href="https://bubnovd.net/tags/cmd/index.xml" rel="self" type="application/rss+xml"/><item><title>Сила командной строки. Вводная.</title><link>https://bubnovd.net/blogger/%D1%81%D0%B8%D0%BB%D0%B0-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%BE%D0%B9-%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8.-%D0%B2%D0%B2%D0%BE%D0%B4%D0%BD%D0%B0%D1%8F./</link><pubDate>Tue, 09 Jul 2013 07:31:00 +0000</pubDate><guid>https://bubnovd.net/blogger/%D1%81%D0%B8%D0%BB%D0%B0-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%BE%D0%B9-%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8.-%D0%B2%D0%B2%D0%BE%D0%B4%D0%BD%D0%B0%D1%8F./</guid><description>Тру-админы знают, что все операции с компьютером можно произвести так, чтобы пользователь даже не знал о том, что с его компьютером что-то происходило. И даже иметь домен не обязательно. Для самых маленьких в этой статье я опишу наиболее часто используемые мной утилиты командной строки, а в будущем, возможно, буду обновлять этот пост.Для юных админов сразу хочется сделать мотивационный пинок: не бойтесь cmd! Это ваш лучший друг и соратник. Понимаю, что при первом запуске cmd вам очень страшно и бегут какие-то непонятные буквоцифры и Морфеуса нет рядом.</description><content>&lt;p>Тру-админы знают, что все операции с компьютером можно произвести так, чтобы пользователь даже не знал о том, что с его компьютером что-то происходило. И даже иметь домен не обязательно. Для самых маленьких в этой статье я опишу наиболее часто используемые мной &lt;!-- raw HTML omitted -->утилиты командной строки&lt;!-- raw HTML omitted -->, а в будущем, возможно, буду обновлять этот пост.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Для юных админов сразу хочется сделать мотивационный пинок: не бойтесь cmd! Это ваш лучший друг и соратник. Понимаю, что при первом запуске cmd вам очень страшно и бегут какие-то непонятные буквоцифры и Морфеуса нет рядом. К этому быстро привыкаешь, и потом уже паникуешь, когда cmd не свернут в панель задач. А чтобы прокачать скилы и убить страх - ставьте Linux без графической оболочки! А ещё можно запустить tracert ya.ru и с умным видом говорить начальнику, что тестируешь производительность сетевой подсистемы южного моста виртуального сервера баз данных, запущенного в облаке.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Интерпретатор командной строки cmd&lt;!-- raw HTML omitted --> запускается из меню Стандартные или набором волшебных трёх букв (угадайте каких!) в строке Выполнить. Откроется черное окошко с белым приглашением. Вся это красотень настраивается как душе угодно, но сейчас не об этом.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Перейдем к командам. Про ping писать не буду - и так все знают. Скажу лишь, что при добавлении к команде символов /? можно узнать много нового.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Команды для работы с сетью&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ipconfig /all - позволяет узнать сетевые настройки: MAC сетевушки, IP-адрес, адреса шлюза и DNS серверов.&lt;!-- raw HTML omitted -->ipconfig /flushdns - очищает кэш DNS. При подозрениях на проблемы в работе DNS, первым делом запускайте эту команду.&lt;!-- raw HTML omitted -->ipconfig /renew - обновляет настройки сетевого адаптера с DHCP-сервера.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->netstat - отображение статистики TCP/IP и текущих сетевых подключений. Имеет множество параметров.&lt;!-- raw HTML omitted -->netstat -a - отображает все подключения и ожидающие порты.&lt;!-- raw HTML omitted -->netstat -b - отображает процесс, ответственный за открытый порт&lt;!-- raw HTML omitted -->netstat -p TCP - выводит данные только по TCP. То же самое есть по UDP и TCPv6, UDPv6.&lt;!-- raw HTML omitted -->netstat -r - выводит таблицу маршрутизации.&lt;!-- raw HTML omitted -->Я чаще всего пишу так netstat -an | findstr :80. Тут мы получаем список всех соединений с/на порт 80. И если они есть, следующим запросом можно уже поискать какая программа пытается соединиться netstat -anb.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->arp -a - отображение таблицы преобразования IP-адреса в MAC. Полезно, когда нужно узнать MAC удаленного компьютера по его IP или наоборот.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->nslookup - проверяет соответствие IP-адреса DNS-имени. Используется при определении неисправностей системы DNS.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ещё существует целый отдельный шелл для работы с сетью. Он так и зовется netsh (net shell). Его возможности огромны. Приведу лишь наиболее используемое.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->netsh winsock reset - сброс сокета. Т.е. мягкий сброс всех сетевых настроек. О более жестком сбросе &lt;!-- raw HTML omitted -->здесь&lt;!-- raw HTML omitted -->.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->netsh позволяет детально настроить сетевую конфигурацию или посмотреть определенные значения, даже недоступные в графическом интерфейсе. За более подробной информацией предлагаю обратиться к встроенной справке (netsh /?).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Семейство утилит net позволяет подключать/отключать сетевые диски (net use), расшаривать ресурсы (net share), просматривать расшаренные ресурсы в сети (net view). Последняя команда помогает при непонятных проблемах с подключением к общим папкам - можно увидеть конкретную ошибку, которую не показывает GUI. Утилиты net позволяют работать не только с сетью, несмотря на название. Можно создать локального пользователя (net user username /add), добавить его в группу (net localgroup groupname username /add), запустить (net start servicename) или остановить (net stop servicename) службу. Предлагаю поближе познакомиться с этими утилитами и они окажут вам хорошую помощь. Ну а если будет время и желание, то я сам постараюсь подробнее расписать о них в следующих постах.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Управление удаленным компьютером&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Многие начинающие админы считают, что терминал это прошлый век и недооценивают его возможности, так как все нужные операции можно произвести из графического интерфейса. А знаете ли вы, что все эти операции можно произвести и на удаленном компьютере, причем абсолютно незаметно для пользователя и без применения средств удаленного администрирования вроде RAdmin и TeamViewer? Ведь зачем отрывать дорогого бухгалтера от расчета вашей зарплаты только для того, чтобы посмотреть запущена ли на его машина служба общего реестра? Можно ведь просто набрать в командной строке sc \buhpc query remoteregistry.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Вообще утилита sc довольно мощная - с её помощью можно детально настраивать управление службами. И не только на удаленном компьютере.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Для &lt;!-- raw HTML omitted -->управления удаленной машиной&lt;!-- raw HTML omitted --> я использую утилиты Sysinternals великого Марка Руссиновича. Чаще всего это PsExec. Она позволяет запустить командную строку или любой другой процесс на удаленной машине (psexec \remotepc cmd). А дальше делать с ней всё, что захочется. Для этого нам и нужна сила cmd.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Управление принтерами - prnjobs. Сам ещё не юзал, но обязательно разберусь и отпишусь.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ну вот и назрела тема для нескольких следующих постов. Это sc, prn*, net, netsh, wmic и Sysinternals. Ждём продолжения!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1&lt;!-- raw HTML omitted -->, &lt;!-- raw HTML omitted -->2&lt;!-- raw HTML omitted -->&lt;/p></content></item><item><title>Скрипт. Заливка файлов на FTP</title><link>https://bubnovd.net/blogger/%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82.-%D0%B7%D0%B0%D0%BB%D0%B8%D0%B2%D0%BA%D0%B0-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%BD%D0%B0-ftp/</link><pubDate>Mon, 15 Aug 2011 20:41:00 +0000</pubDate><guid>https://bubnovd.net/blogger/%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82.-%D0%B7%D0%B0%D0%BB%D0%B8%D0%B2%D0%BA%D0%B0-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%BD%D0%B0-ftp/</guid><description>Этот скрипт был написан для предотвращения нежелательных последствий от BSOD. Скрипт просматривает папку с дампами BSOD. Если дампы есть (синий экран был), то создаёт на FTP-сервере папку с датой создания дампа в качестве имени, а внутри неё папку с именем сбойной машины. И уже в эту папку копирует дампы. Затем переименовывает дампы в *.dmp.old, чтобы на следующий день их не копировать. Если скрипт запущен впервые, он копирует дампы как положено (каждый на свою дату).</description><content>&lt;p>Этот скрипт был написан для предотвращения нежелательных последствий от BSOD. Скрипт просматривает папку с дампами BSOD. Если дампы есть (синий экран был), то создаёт на FTP-сервере папку с датой создания дампа в качестве имени, а внутри неё папку с именем сбойной машины. И уже в эту папку копирует дампы. Затем переименовывает дампы в *.dmp.old, чтобы на следующий день их не копировать. Если скрипт запущен впервые, он копирует дампы как положено (каждый на свою дату).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Краткое описание скрипта:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Секция check. Проверяет, есть ли уже дампы. Если нет, скрипт заканчивает свою работу. Если да - переходит на следующую секцию.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Секция makeftpcommand. Создаёт файл с именем script, в который пишет команды для работы с FTP.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Секция makedirectory. Анализирует папку с дампами и записывает в script команду для создания папки на FTP-сервере с именем вида дата/имя_машины.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Секция copyfiles. Заливает дамп в нужную папку.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Секция rename. Переименовывает дамп в &lt;em>.dmp.old, чтобы при следующем запуске не копировать уже скопированные файлы.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Оставшиеся строки закрывают файл script, выполняют его и удаляют.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo on&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo =======================================&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo Copying memory dumps on FTP-server&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo =======================================&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo Script started&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->set $SRC=&amp;quot;%systemroot%\minidump&amp;quot;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->:check&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo Checking files&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@if exist $SRC*.dmp goto makeftpcommand&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->:makeftpcommand&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->set addr=script&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->echo.open 127.0.0.1&amp;gt;&amp;gt; %ADDR%&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->echo.anonymous&amp;gt;&amp;gt; %ADDR%&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->echo.&amp;gt;&amp;gt; %ADDR%&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->echo.binary&amp;gt;&amp;gt; %ADDR%&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->:makedirectory&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo Making directories&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->for %%a in (%$SRC%) do (for /f &amp;ldquo;tokens=1&amp;rdquo; %%b in (&amp;quot;%%~ta&amp;quot;) do (echo.mkdir %%~b%computername%&amp;gt;&amp;gt;%ADDR%))&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->:copyfiles&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->@echo Copying files&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->for %%a in (%$SRC%) do (for /f &amp;ldquo;tokens=1&amp;rdquo; %%b in (&amp;quot;%%~ta&amp;quot;) do (echo.cd %%~b%computername%&amp;gt;&amp;gt;%ADDR% &amp;amp;&amp;amp; echo.send %%a &amp;gt;&amp;gt;%ADDR% &amp;amp;&amp;amp; echo.cd ../..&amp;gt;&amp;gt;%ADDR%))&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->:rename&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->for /f &amp;ldquo;tokens=1&amp;rdquo; %%a in (&amp;lsquo;dir /b %$SRC%*.&lt;/em>&amp;rsquo;) do ren %$SRC%%%a %%a.old&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->echo.bye&amp;gt;&amp;gt; %ADDR%&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ftp.exe -s:%ADDR% &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->del /F /Q script&lt;!-- raw HTML omitted -->&lt;/p></content></item></channel></rss>