<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>настройка on Админская фамилия</title><link>https://bubnovd.net/tags/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0/</link><description>Recent content in настройка on Админская фамилия</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 20 Jun 2013 10:35:00 +0000</lastBuildDate><atom:link href="https://bubnovd.net/tags/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0/index.xml" rel="self" type="application/rss+xml"/><item><title>Обзор и первоначальная настройка D-Link DFL-260e</title><link>https://bubnovd.net/blogger/%D0%BE%D0%B1%D0%B7%D0%BE%D1%80-%D0%B8-%D0%BF%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-d-link-dfl-260e/</link><pubDate>Thu, 20 Jun 2013 10:35:00 +0000</pubDate><guid>https://bubnovd.net/blogger/%D0%BE%D0%B1%D0%B7%D0%BE%D1%80-%D0%B8-%D0%BF%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-d-link-dfl-260e/</guid><description>Аппаратный файерволл D-Link DFL-260e используется в качестве пограничного звена между локальной сетью и Интернет.
Функций и производительности рассматриваемого файерволла вполне достаточно для обслуживания средней компании с числом активных пользователей сети около 100. Итак, что же умеет данная железяка.
Port Based VLAN IDS/IPS Потоковое антивирусное сканирование Web-фильтр IPSec/PPTP/L2TP Server/Client Ну и стандартные плюшки в виде DHCP-сервера, гибкого файерволла и т.д. При первом включении мастер просит нас задать пароль админа (дефолтный пароль стандартен для D-Link&amp;rsquo;a - admin, IP - 192.</description><content>&lt;p>Аппаратный файерволл D-Link DFL-260e используется в качестве пограничного звена между локальной сетью и Интернет.&lt;/p>
&lt;p>&lt;a href="http://mdata.yandex.net/i?path=b0626171028_img_id2740646706143100297.jpg">&lt;img src="http://mdata.yandex.net/i?path=b0626171028_img_id2740646706143100297.jpg" alt="">&lt;/a>&lt;/p>
&lt;p>Функций и производительности рассматриваемого файерволла вполне достаточно для обслуживания средней компании с числом активных пользователей сети около 100. &lt;/p>
&lt;p>Итак, что же умеет данная железяка.&lt;/p>
&lt;ol>
&lt;li>Port Based VLAN&lt;/li>
&lt;li>IDS/IPS&lt;/li>
&lt;li>Потоковое антивирусное сканирование&lt;/li>
&lt;li>Web-фильтр&lt;/li>
&lt;li>IPSec/PPTP/L2TP Server/Client&lt;/li>
&lt;li>Ну и стандартные плюшки в виде DHCP-сервера, гибкого файерволла и т.д.&lt;/li>
&lt;/ol>
&lt;p>При первом включении мастер просит нас задать пароль админа (дефолтный пароль стандартен для D-Link&amp;rsquo;a - admin, IP - 192.168.10.1), установить настройки SNMP сервера и настроить адреса интерфейсов - всё тривиально.&lt;/p>
&lt;p>Перейдем к настройке файерволла. Система встречает нас следующим экраном.&lt;/p>
&lt;p>&lt;a href="http://1.bp.blogspot.com/-AUj0j035Yn4/UcMC9WtTtnI/AAAAAAAAASE/pjyti_ASOpY/s1600/1.png">&lt;img src="https://1.bp.blogspot.com/-AUj0j035Yn4/UcMC9WtTtnI/AAAAAAAAASE/pjyti_ASOpY/s1600/1.png" alt="">&lt;/a>&lt;/p>
&lt;p>Главная страница&lt;/p>
&lt;p>Сначала определимся с политиками доступа к устройству. Выбираем в меню System - Remote Management. Тут надо понять кто и откуда сможет заходить в интерфейс устройства. По умолчанию стоит доступ только из LAN (интерфейс lan, т.е. тот, что смотрит в локалку и сеть lannet). Если в компании нет жестких политик безопасности или железка ставится в филиал, то нужно разрешить доступ и из WAN, с выбором конкретных адресов, с которых можно подключаться. Я поставил неограниченный доступ (интерфейс любой (any), сеть - любая (all-nets)), т.к. мало ли где я окажусь, когда фаер глюканет и потребуется его перезагрузка или добавление новых правил. Также можно выбрать протокол, по которому будет производиться управление. Я рекомендую https - он безопасней. Объяснять почему не буду. Кто знает - тот знает, кто не знает - примите за аксиому или сходите в вики.&lt;/p>
&lt;p>&lt;a href="http://2.bp.blogspot.com/-BW2IMxfZudA/UcMec7wVRsI/AAAAAAAAAS8/I_rPwAQevGI/s1600/4.png">&lt;img src="https://2.bp.blogspot.com/-BW2IMxfZudA/UcMec7wVRsI/AAAAAAAAAS8/I_rPwAQevGI/s1600/4.png" alt="">&lt;/a>&lt;/p>
&lt;p>Настройка управления устройством&lt;/p>
&lt;p>Теперь нужно указать устройству все возможные адреса, с которыми ему (устройству) предстоит работать. Настраивать фаер мы будем по &amp;ldquo;правильному&amp;rdquo; принципу - &amp;ldquo;Всё, что не разрешено - запрещено&amp;rdquo;.&lt;/p>
&lt;p>Идём в Objects - Address Book. По дефолту там уже созданы 2 папки - InterfaceAddresses и DHCPAddresses, и адрес all-nets - 0.0.0.0/0, означающий все возможные адреса сети. Я создал несколько адресов, принадлежащих моей локалке и папку Allowed_IP, в которой будут содержаться айпишники разрешенных сетей. В поле Address можно писать не только IP-адрес, но и целую подсеть, например 192.168.0.0/24. Не забывайте после операций по настройке сохранять конфигурацию Configuration - Save and Activate.&lt;/p>
&lt;p>&lt;a href="http://3.bp.blogspot.com/-lggYbOm45_E/UcMGKt_1pAI/AAAAAAAAASU/QvA4-ak1hUM/s1600/2.png">&lt;img src="https://3.bp.blogspot.com/-lggYbOm45_E/UcMGKt_1pAI/AAAAAAAAASU/QvA4-ak1hUM/s1600/2.png" alt="">&lt;/a>&lt;/p>
&lt;p>Добавление адресов&lt;/p>
&lt;p>Для удобства ИП-адреса лучше добавлять в группы (чтобы для этой группы потом сделать единое правило в файерволле - это гораздо удобней, чем раздавать идентичные правила для кучи адресов). Это делается выбором IP4 Group при нажатии на кнопку Add. &lt;/p>
&lt;p>&lt;a href="http://1.bp.blogspot.com/-lw0HMp7KZ2c/UcMbi-yH2AI/AAAAAAAAASs/KK9ys87GP6I/s1600/3.png">&lt;img src="https://1.bp.blogspot.com/-lw0HMp7KZ2c/UcMbi-yH2AI/AAAAAAAAASs/KK9ys87GP6I/s1600/3.png" alt="">&lt;/a>&lt;/p>
&lt;p>Создание группы&lt;/p>
&lt;p>Переходим к настройке правил фильтрации трафика. Выбираем в главном меню (слева) пункт Rules - IP Rules. По умолчанию включены несколько правил, но их мы рассматривать не будем и отключим сразу (правой кнопкой на правиле - Disable, или сразу Delete для удаления правила). Без правил DFL будет блочить весь траффик. Правила применяются сверху вниз, для этого в интерфейсе на контекстном меню правила есть кнопки для перемещения его по цепочке вверх-вниз. Т.е. если первым у вас стоит правило, блокирующее, к примеру, весь траффик на подсети Яндекса, а четвертым стоит правило, разрешающее http траффик на эти же подсети, то четвертое правило не сработает, т.к. все пакеты на эти подсети буду отсечены первым правилом.&lt;/p>
&lt;p>Создание правил рассмотрим на одном - остальные идентичны (кроме, пожалуй, http правил - там много всяких плюшек, о которых будет сказано ниже). &lt;/p>
&lt;p>Кратко по возможным правилам. Drop - просто отсекает пакеты, будто они не дошли до получателя. Отправитель при этом даже не будет знать, что вы онлайн. Reject - не пропускает пакет, но при этом отправляет ошибку ICMP или сброс TCP. Allow - разрешает трафик. NAT - собственно НАТ, то, что разрешает устройствам из локалки нормально общаться с устройствами в WAN. Forward Fast - не знаю зачем. SAT - Static Address Translation - перенаправление пакетов с заданными параметрами (ИП получателя, ИП отправителя, порт) на конкретный ИП и порт. Необходим для корректной работы сервисов за фаером (в LAN&amp;rsquo;е). Multiplex SAT - тоже не знаю, но судя по названию это SAT, только для нескольких устройств сразу.&lt;/p>
&lt;p>В примере создаем правило обновления антивируса NOD с сервера в главном офисе.&lt;/p>
&lt;ol>
&lt;li>Создаем сервис (порт), если он не стандартен. Все стандартные порты уже созданы и лежат в Objects - Services. Заходим туда. Add - TCP/UDP Service (здесь зависит от того, какой сервис вы создаете. В большинстве случаев это именно TCP/UDP сервисы). Пишем название. Выбираем тип (если не знаете - пишите TCP/UDP). Source - порт-источник, т.е. порт, с которого пойдет пакет. В нашем случае - любой. Destination - порт-получатель, куда уходит пакет (эти порты ставятся в настройках серверов). Можно перечислить несколько портов, например, 135-137, 449. Application Layer Gateway создает особые правила для сервисов. Нам пока не понадобится.&lt;/li>
&lt;/ol>
&lt;p>&lt;a href="http://1.bp.blogspot.com/-4Vzq7xmkQeA/UcMkI4zeamI/AAAAAAAAATM/NoeL8uMrHPQ/s1600/5.png">&lt;img src="https://1.bp.blogspot.com/-4Vzq7xmkQeA/UcMkI4zeamI/AAAAAAAAATM/NoeL8uMrHPQ/s1600/5.png" alt="">&lt;/a>&lt;/p>
&lt;p>Создание нестандартного порта&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>Нажимаем Add - IP Rule. Пишем название правила (выбирайте осмысленные названия, иначе через месяц сами запутаетесь в том, что насоздавали, не говоря уже о тех, кто будет поддерживать эту систему после вас). Чтобы дать доступ к серверу в WAN определенной машине из LAN нужно выбрать правило NAT. Выбираем нужный сервис. В меню Schedule можно выбрать расписание действия правила, например, рабочие дня, нерабочие часы и т.д. Можно самим создавать расписания. Но нам пока это неважно. Source Interface - интерфейс, откуда будет идти первый пакет - выбираем LAN. Source Network - подсеть, откуда пойдет первый пакет - lannet, а лучше группа адресов, к которым применяется правило. Ведь видеорегистратору обновление антивируса не нужно, следовательно и правило на него действовать не должно. Destinatio Interface - интерфейс, куда уходит пакет - WAN. Destination Network - сеть назначения - можно all-nets, а лучше конкретный адрес из списка адресов.&lt;/p>
&lt;p>&lt;a href="http://1.bp.blogspot.com/-i6SK-dlUR_Y/UcMvXdBzmOI/AAAAAAAAATc/hgKDxYBXsuY/s1600/6.png">&lt;img src="https://1.bp.blogspot.com/-i6SK-dlUR_Y/UcMvXdBzmOI/AAAAAAAAATc/hgKDxYBXsuY/s1600/6.png" alt="">&lt;/a>&lt;/p>
&lt;p>Создание правила NAT&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Не забываем сохранять конфигурацию и проверять корректность работы правил. Если нечаянно закроете себе доступ к управлению железкой - не переживайте - при отсутствии коннекта к веб-интерфейсу в течение 30 сек. роутер скидывает настройки на предыдущие. Создаем подобные правила для всех нужных наружных сервисов. У меня созданы следующие правила: разрешен весь пинг (icmp), RDP на нестандартный порт в главный офис, DNS на соответствующие сервера, HTTP и HTTPS на разрешенные подсети, обновление антивируса.&lt;/p>
&lt;p>&lt;a href="http://4.bp.blogspot.com/-LHJ52KxP0YU/UcMwgykuMdI/AAAAAAAAATs/aAzWMsJwGng/s1600/7.png">&lt;img src="https://4.bp.blogspot.com/-LHJ52KxP0YU/UcMwgykuMdI/AAAAAAAAATs/aAzWMsJwGng/s1600/7.png" alt="">&lt;/a>&lt;/p>
&lt;p>Правила NAT&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Теперь нужно создать правила для доступа к внутренним сервисам снаружи. Для примера откроем порт RAdmin&amp;rsquo;а на один из компьютеров. Для правил проброса портов я создал папку port_forwarding, чтобы не запутаться в правилах. Создаем новое правило SAT. Выбираем нужный порт (предварительно создаем его, если нестандартный). Source Interface - wan, Source Network - нужная подсеть или all-nets, Destination Interface - core, Destination Network - wan_ip.&lt;/p>
&lt;p>&lt;a href="http://2.bp.blogspot.com/-VE9brPCcNrc/UcM39HoPikI/AAAAAAAAAUA/bYqjRnzFjMw/s1600/8.png">&lt;img src="https://2.bp.blogspot.com/-VE9brPCcNrc/UcM39HoPikI/AAAAAAAAAUA/bYqjRnzFjMw/s1600/8.png" alt="">&lt;/a>&lt;/p>
&lt;p>Перенаправление портов&lt;/p>
&lt;p>Переходим на вкладку SAT. New IP Address - IP нужного устройства (на котором запущен сервис), New Port - оставляем, если он такой же как в указанном на вкладке General сервисе или ставим новый. Например, при пробросе RDP порта не принято &amp;ldquo;светить&amp;rdquo; наружу стандартный порт 3389, поэтому в General указываем левый порт (допустим 6547), а в SAT уже стандартный - 3389. Сохраняем правило.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;a href="http://1.bp.blogspot.com/-gSeiZN75PEs/UcM4kSWXbWI/AAAAAAAAAUE/_4kzeTCvcAM/s1600/9.png">&lt;img src="https://1.bp.blogspot.com/-gSeiZN75PEs/UcM4kSWXbWI/AAAAAAAAAUE/_4kzeTCvcAM/s1600/9.png" alt="">&lt;/a>&lt;/p>
&lt;p>Назначение&lt;/p>
&lt;p>Порт прокинули, теперь нужно разрешить прием пакетов на этот порт. Создаем новое правило. Action - allow, Source и Destination - так же, как в предыдущем правиле. &lt;/p>
&lt;p>&lt;a href="http://3.bp.blogspot.com/-aOG_5IXqphY/UcM5d5EGHnI/AAAAAAAAAUQ/DooBfBTiF8Q/s1600/10.png">&lt;img src="https://3.bp.blogspot.com/-aOG_5IXqphY/UcM5d5EGHnI/AAAAAAAAAUQ/DooBfBTiF8Q/s1600/10.png" alt="">&lt;/a>&lt;/p>
&lt;p>Разрешаем траффик&lt;/p>
&lt;p>На этом основная часть настройки DFL-260 закончена. Можно приступить к детальной настройке. &lt;/p>
&lt;p>Для начала зарегистрируем наше устройство на сайте D-Link. Идем по &lt;a href="http://security.dlink.com.tw/">ссылке&lt;/a>. Её же можно найти в Maintanance - License. Регистрируемся и получаем 90 дней бесплатного обновления IPS и антивируса. В Objects - ALG with AV/WCF находятся несколько стандартных правил с расширенным применением фильтрации. Рассмотрим некоторые из них.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>http-outbound. Правило для исходящего http траффика. Блокирует загрузку некоторых типов файлов (устанавливается на вкладке File Integrity). В остальном никаких ограничений.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>http-outbound-av. То же, что и предыдущее, но с добавлением антивирусной проверки траффика. Настраивается на вкладке Anti-Virus.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>http-outbound-wcf. То же, что и первое, но с функцией Web Content Filtering. Железкой выкачиваются списки фильтрации с сайта D-Link и весь траффик, проходящий, через железку, проверяется на содержание в этих списках. Настраивается во вкладке Web Content Filtering. Здесь вы можете настроить фильтрацию траффика. Например, запретить соц. сети, спортивные сайты, но оставить порнуху.&lt;/p>
&lt;p>&lt;a href="http://3.bp.blogspot.com/-HRVx_M5n4tA/UcM8MS3Q6QI/AAAAAAAAAUk/uRQOoVS8p8s/s1600/11.png">&lt;img src="https://3.bp.blogspot.com/-HRVx_M5n4tA/UcM8MS3Q6QI/AAAAAAAAAUk/uRQOoVS8p8s/s1600/11.png" alt="">&lt;/a>&lt;/p>
&lt;p>Web Content Filtering&lt;/p>
&lt;/li>
&lt;li>
&lt;p>http-outbound-av-wcf. Правило, включающее в себя все прелести двух предыдущих.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>На этом пока всё. Железка может ещё многое. Например, статик роутинг, IGMP, IDS/IPS, RADIUS, траффик-шейпинг и т.д., но это уже выходит за рамки этого поста. Итак уже много накалякал. Надеюсь, кому-то поможет.&lt;/p>
&lt;p>&lt;a href="http://www.ixbt.com/comm/firewall-dlink-dfl-210.shtml">Здесь&lt;/a> есть инфа по этому роутеру. Правда устаревшая, но основные моменты остались прежними.&lt;/p>
&lt;p>А лучше не париться с этим железом, а приобрести роутеры от Mikrotik, в которых подобная конфигурация делается в два счета. И помощь можно найти на любом углу рунета. В том числе в моем блоге по тегу &lt;a href="http://www.bubnovd.net/search/label/Mikrotik">Mikrotik&lt;/a>. А ещё Mikrotik дешевле. А ещё я могу &lt;a href="http://www.bubnovd.net/2016/10/MTCNA-Chelyabinsk-nov2016.html">научить&lt;/a> вас всем его премудростям.&lt;/p></content></item><item><title>Настройка FTP-сервера в IIS7</title><link>https://bubnovd.net/blogger/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-ftp-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0-%D0%B2-iis7/</link><pubDate>Tue, 03 Jul 2012 00:00:00 +0000</pubDate><guid>https://bubnovd.net/blogger/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-ftp-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0-%D0%B2-iis7/</guid><description>FTP довольно старый протокол (ему уже больше 40 лет), но довольно удобный и до сих пор используется очень многими администраторами для обмена файлами. Есть целая куча разнообразных FTP-серверов под винду - от простейшего Quick&amp;rsquo;n Easy FTP Server до таких громил как Titan FTP Server и Serv-U. В серверных дистрибутивах Windows тоже есть возможность поднять FTP-сервер. Хоть многие и ругают MS за хромую безопасность и ошибки в коде, использование встроенных ролей сервера вместо решений стороннего производителя имеет свои плюсы.</description><content>&lt;p>FTP довольно старый протокол (ему уже больше 40 лет), но довольно удобный и до сих пор используется очень многими администраторами для обмена файлами. Есть целая куча разнообразных FTP-серверов под винду - от простейшего Quick&amp;rsquo;n Easy FTP Server до таких громил как Titan FTP Server и Serv-U.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> В серверных дистрибутивах Windows тоже есть возможность поднять FTP-сервер. Хоть многие и ругают MS за хромую безопасность и ошибки в коде, использование встроенных ролей сервера вместо решений стороннего производителя имеет свои плюсы. Главный из них - это полная совместимость со всеми службами MS (в частности AD) и тонкая настройка интеграции этих служб.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Рассмотрим установку и настройку FTP-сервера на примере Windows 2008R2 и IIS7.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Добавляем роль FTP в Диспетчер сервера - Добавление ролей. Следует выбрать Веб-сервер(IIS), в следующем окне диалога выбираем FTP-сервер.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Настройка FTP-сервера.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Открываем диспетчер сервера - Веб сервер - Диспетчер служб IIS - наш сервер. ПКМ по разделу сайты - добавить FTP-сайт.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Пишем название нашего сайта и путь к физическому расположению каталогов&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Задаем IP-адрес и порт, на которых будет висеть наш сервер. Здесь же можно установить защиту соединения и выбрать сертификат. Этим мы займемся позже.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Сейчас наша цель - сделать простейший доступ, поэтому в следующем диалоговом окне выбираем Анонимный доступ.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->На этом начальная настройка FTP-сервера закончена. Но при попытке войти в него у нас ничего не получится. На этапе настройки сервера рекомендую включить подробное логирование событий, чтобы при выявлении ошибок можно было легко их опознать. Выбираем начальную страницу нашего сервера - Ведение журнала FTP - нажимаем Выберите поля W3C и ставим галочку Дополнительные сведения &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь в папке C:\inetpub\logs\LogFiles\FTPSVC мы можем увидеть подробный лог нашего сервера.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Для доступа к серверу анонимных пользователей необходимо в правилах авторизации FTP добавить правило для анонимных пользователей и установить флажок типа доступа (чтение, запись).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Всё! Простейший FTP-сервер готов к работе. Чтобы раздать более тонкие права, следует выставить их  в разделах Правила авторизации и Проверка подлинности FTP. Для настройки прав на вложенные папки требуется выполнить такую же настройку для папок (в диспетчере выбрать не сервер целиком, а нужную папку). &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Вот так настраивается FTP-сервер, входящий в состав веб-сервера IIS7 в Windows 2008R2. Отличительной его особенностью является тесная интеграция с серверными службами Microsoft, такими как веб-сервер и контроллер домена.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь рассмотрим работу FTP-сервера с сертификатами.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Протокол FTP довольно слабо защищен в плане безопасности. При авторизации пользователя, его учетные данные передаются по сети в незашифрованном виде и могут быть перехвачены злоумышленником. Чтобы этого не случилось, требуется ввести шифрование соединения.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Если у вас уже есть сертификат, то первую часть можете не читать.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Создание самоподписанного сертификата.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->На начальной странице веб-сервера выбираем пункт Сертификаты сервера. В появившемся окне щелкаем ПКМ и выбираем Создать самоподписанный сертификат. Даём ему осмысленное имя. Сертификат создается автоматически.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Настройка SSL на FTP.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->На начальной странице FTP сервера выбираем Параметры SSL FTP. Ставим галочку Требовать SSL-соединения и выбираем наш сертификат.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь подключиться к серверу можно только с клиента, поддерживающего шифрованные FTP-соединения, например Filezilla. При настройке соединения в Filezilla необходимо выбрать Require explicit FTP over TLS. При подключении к FTP-серверу клиент выдаст предупреждение о сертификате. Необходимо принять его.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь у нас есть безопасный FTP-сервер с возможностью тонкой настройки и интеграцией со службами Microsoft. Конечно, можно было настроить продукт стороннего производителя, но с родным не будет ничего лишнего в системе.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Не нашел, где можно детально настроить скорость и права для каждого пользователя, как в том же Titan&amp;rsquo;е например. Но это уже задача не столько FTP-сервера, сколько шейпера. MS предлагает такие решения, но уже за отдельные деньги.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Видео по настройке FTP &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></content></item><item><title>Cетевой экран Kaspersky Internet Security, разбираемся с настройками по умолчанию</title><link>https://bubnovd.net/blogger/c%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD-kaspersky-internet-security-%D1%80%D0%B0%D0%B7%D0%B1%D0%B8%D1%80%D0%B0%D0%B5%D0%BC%D1%81%D1%8F-%D1%81-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D0%BC%D0%B8-%D0%BF%D0%BE-%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E/</link><pubDate>Sun, 18 Sep 2011 22:59:00 +0000</pubDate><guid>https://bubnovd.net/blogger/c%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD-kaspersky-internet-security-%D1%80%D0%B0%D0%B7%D0%B1%D0%B8%D1%80%D0%B0%D0%B5%D0%BC%D1%81%D1%8F-%D1%81-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%D0%BC%D0%B8-%D0%BF%D0%BE-%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E/</guid><description>Первый шаг к безопасному путешествию по бескрайним просторам всевозможных сетей это конечно же установка надежного средства защиты. Одним из немногих таких средств является комплексный продукт Kaspersky Internet Security. Несмотря на то, что KIS продукт достаточно сложный, он сразу после установки готов выполнять все возложенные на него обязанности. Необходимость в дополнительных настойках возникает крайне редко, и это очень большой плюс разработчикам. Но необходимо понимать, что эта возможность базируется на острой грани компромиссных решений.</description><content>&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Первый шаг к безопасному путешествию по бескрайним просторам всевозможных сетей это конечно же установка надежного средства защиты. Одним из немногих таких средств является комплексный продукт &lt;!-- raw HTML omitted -->Kaspersky Internet Security&lt;!-- raw HTML omitted -->. Несмотря на то, что KIS продукт достаточно сложный, он сразу после установки готов выполнять все возложенные на него обязанности. Необходимость в дополнительных настойках возникает крайне редко, и это очень большой плюс разработчикам. Но необходимо понимать, что эта возможность базируется на острой грани компромиссных решений. В чем они заключаются рассмотрим на примере сетевого экрана.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Настройки сетевого экрана состоят из двух частей: правила для программ и пакетные правила. При помощи правил программ можно разрешать или запрещать определенным программам или группам программ посылать или принимать пакеты или устанавливать сетевые соединения. При помощи пакетных правил разрешается или запрещается устанавливать входящие или исходящие соединения, и передача или прием пакетов.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Посмотрим, что представляют собой правила для программ.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Все программы имеется четыре категории:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Доверенные – им разрешено все без исключения.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Слабые ограничения – установлено правило “запрос действия”, позволяющее пользователю по самостоятельно принимать решение о целесообразности сетевого общения программ этой группы.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Сильные ограничения – в части разрешения работы с сетью, то же, что и слабые.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Не доверенные – по умолчанию этим программам запрещено любое сетевое общение (по человечески очень жаль их).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->В группу “доверенные” по умолчанию помещены все программы от Микрософт, собственно сам KIS и другие программы известных производителей. Для настроек по умолчанию выбор хороший, но лично я не стал бы всем программам, пусть даже и именитых производителей, так безраздельно доверять.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Как же попадают программы в ту или иную группу? Здесь все не так просто. Решение о помещении конкретной программы в одну из четырех групп принимается на основе нескольких критериев:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Наличие сведений о программе в KSN (Kaspersky Security Network).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Наличие у программы цифровой подписи (уже проходили).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Эвристический анализ для неизвестных программ (что то типа гадания).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Автоматически помещать программу в заранее выбранную пользователем группу.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Все эти опции находится в настройках “Контроль программ”. По умолчанию установлены первые три опции, использование которых и приводит к большому количеству “доверенных” программ. Четвертую опцию можно выбрать самостоятельно как альтернативу первым трем.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Проведем эксперимент. Поместим какую либо программу (например, браузер “Opera”) в список программ со слабыми ограничениями и посмотрим как работает правило “запрос действия”. Для вступления правил программ в действие нужно закрыть и снова открыть программу, правила для которой были изменены. Если теперь попробовать зайти на любой сайт, то никакого запроса действия не произойдет, а программа спокойно установит сетевое соединение. Как оказалось, правило “запрос действия” работает только если в основных параметрах защиты снят флажок с опции “Выбирать действие автоматически”.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Еще один сюрприз ожидает пользователей сетевых утилит типа ping, tracert (если правило “запрос действия” распространить на доверенные программы), putty (ssh клиент) и, возможно, им подобных. Для них KIS упорно не хочет выводить экран запроса действия. Здесь выход может быть только один – устанавливать разрешения для конкретной программы вручную.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Прежде, чем перейти к пакетным правилам, позволю себе один совет: создавайте для каждой группы программ свои подгруппы. Например: “Сетевые утилиты”, “Офисные программы”, “Программы для Интернета”, и т.д. Во первых, всегда можно будет быстро найти нужную программу, и, во вторых, можно будет устанавливать правила на определенные группы, вместо установки правил для отдельных программ.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Пакетные правила.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->  &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->В пакетных правилах определяются отдельные признаки пакетов: протокол, направление, локальный или удаленный порт, сетевой адрес. Пакетные правила могут действовать как “разрешающие”, “запрещающие” и “по правилам программ”. Правила просматриваются сверху вниз пока не будет найдено разрешающее или запрещающее правило по совокупности признаков. Если правило для пакета не найдено, то применяется правило по умолчанию (последнее). Обычно в сетевых экранах последним правилом устанавливают запрет на прием и передачу любых пакетов, но для KIS это правило разрешающее.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Действие “по правилу программ” является по своей природе “окном” для собственно действий правил программ. Это удобно, поскольку можно определять очередность выполнения правил. Например, программа пытается отправить пакет на 53 порт DNS сервера. Если есть пакетное правило с действием “по правилам программ”, направлением “исходящее”, удаленный порт 53 (или не определен), и для программы установлено разрешающее правило для отправки пакета на 53 порт, то пакет будет отправлен, если программе запрещено отправлять пакеты на 53 порт, то этот пакет отправлен не будет.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Область действия правил охватывает определенную область: “любой адрес” (все адреса), “адрес подсети” – здесь можно выбрать тип подсети “доверенные”, “локальные” или “публичные”, и “адреса из списка” – указать IP адреса или доменные имена вручную. Отношение конкретной подсети к “доверенной”, “локальной” или “публичной” устанавливается в общих нстройках сетевого экрана.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Пакетные правила KIS, в отличие от большинства сетевых экранов, перегружены большим числом направлений: “входящее”, “входящее (поток)”, “исходящее”, “исходящее (поток)”, и “входящее/исходящее”. Причем, правила с некоторыми сочетаниями протокола и направления не работают. Например, правило запрета ICMP в сочетании с потоковыми направлениями работать не будет, т.е. запрещенные пакеты будут проходить. К UDP пакетам почему то применяются потоковые направления, хотя UDP протокол по своей природе как такового “потока” не создает, в отличии от TCP.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Еще один, не совсем приятный момент заключается в том, что в пакетных правилах отсутствует возможность указать реакцию на запрет входящего пакета: запретить прием пакета с уведомлением отправившей его стороны или просто отбросить пакет. Это так называемый режим “невидимости”, который раньше в сетевом экране присутствовал.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь обратимся к собственно правилам.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1 и 2 правила разрешают по правилам программ отправлять DNS запросы по протоколам TCP и UDP. Безусловно, оба правила полезны, но в основном такие сетевые программы как почтовые и браузеры запрашивают адреса сайтов через системную службу DNS, за работу которой отвечает системная программа “svchost.exe”. В свою очередь, сама служба использует вполне конкретные адреса DNS серверов, указываемые вручную или через DHCP. Адреса DNS серверов меняются редко, так что вполне хватило бы разрешения отправки DNS запросов для системной службы “svchost.exe” на фиксированные сервера доменных имен.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3 правило разрешает программам отправку электронной почты по протоколу TCP. Здесь также, как и для первых двух правил, достаточно было бы создать правило для конкретной программы работы с электронной почтой указав на какой порт и сервер производить отправку.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4 правило разрешает любую сетевую активность для доверенных сетей. Будьте очень внимательны при включении этого правила, не перепутайте случайно тип сети. Это правило фактически отключает функции сетевого экрана в доверенных сетях.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5 правило разрешает любую сетевую активность по правилам программ для локальных сетей. Это правило хоть и не отключает полностью сетевой экран, но в значительной степени ослабляет его контрольные функции. По логике 4 и 5 правила нужно было бы разместить в самом верху, чтобы предотвратить обработку пакетов правилами 1 – 3 при нахождении компьютера в доверенной или локальной сети.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->6 правило запрещает удаленное управление компьютером по протоколу RDP. Хотя область действия правила “все адреса”, но фактически оно действует только в “публичных сетях”.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->7 и 8 правило запрещает доступ из сети к сетевым службам компьютера по протоколам TCP и UDP. Фактически правило действует только в “публичных сетях”.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->9 и 10 правила разрешают всем без исключения подключаться к компьютеру из любых сетей, конечно исключая службы, запрещенные правилами 6 – 8. Действует правило только для программ с разрешенной сетевой активностью. Но будьте очень внимательны, сетевая активность по умолчанию разрешена практически всем программам за исключением не доверенных.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->11 – 13 правила разрешают прием входящих ICMP пакетов для всех программ. Смысла в этих правилах не больше, чем в 1 – 3, потому, что ICMP в подавляющем большинстве случаев использует программа ping и tracert.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->14 правилом запрещается прием всех типов ICMP пакетов, разумеется за исключением разрешенных правилами 11 – 13.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->16 правило запрещает входящий ICMP v6 эхо запрос. ICMP v6 в подавляющем большинстве случаев не нужен. Можно было бы запретить его полностью.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->17 правило разрешает все, что явно не разрешено или запрещено предыдущими правилами. Это правило хотя и не отображается на экране, но помнить о его существовании безусловно необходимо.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Настройки сетевого экрана KIS по умолчанию безусловно хороши и подходят большинству пользователей домашних компьютеров, на которых, собственно, и ориентирован этот продукт. Но гибкость и нетребовательность к дополнительным настройкам, о которой упоминалось в начале статьи, к сожалению достигается за счет безопасности самих же пользователей, делая эту самую безопасность очень сильно зависимой от человеческого фактора: знаний и безошибочных действий самого пользователя.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Взято &lt;!-- raw HTML omitted -->отсюда&lt;!-- raw HTML omitted -->.&lt;!-- raw HTML omitted -->&lt;/p></content></item></channel></rss>