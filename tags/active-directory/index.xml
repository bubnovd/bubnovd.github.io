<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Active Directory on Bubnovd</title><link>https://bubnovd.github.io/tags/active-directory/</link><description>Recent content in Active Directory on Bubnovd</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 02 Jul 2012 21:00:00 +0000</lastBuildDate><atom:link href="https://bubnovd.github.io/tags/active-directory/index.xml" rel="self" type="application/rss+xml"/><item><title>Перенос учетных записей в домен</title><link>https://bubnovd.github.io/blogger/%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%BE%D1%81-%D1%83%D1%87%D0%B5%D1%82%D0%BD%D1%8B%D1%85-%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B5%D0%B9-%D0%B2-%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD/</link><pubDate>Mon, 02 Jul 2012 21:00:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/%D0%BF%D0%B5%D1%80%D0%B5%D0%BD%D0%BE%D1%81-%D1%83%D1%87%D0%B5%D1%82%D0%BD%D1%8B%D1%85-%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B5%D0%B9-%D0%B2-%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD/</guid><description>Надоело переносить учетки пользователей из локальных в доменные при внедрении Active Directory. Решил найти автоматизированное решение. Оказывается не я первый озадачился этой проблемой =) Есть как минимум 5 вариантов автоматизации. Рассмотрим их по порядку.User State Migration Tool. Бесплатная утилита от Microsoft. Поставляется в комплекте Windows Automated Installation Kit. Используется из консоли. Мануал. У меня не получилось выполнить сохранение профиля - scanstate встал на последнем этапе на 1% и никак не реагировал.</description><content>&lt;p>Надоело переносить учетки пользователей из локальных в доменные при внедрении Active Directory. Решил найти автоматизированное решение. Оказывается не я первый озадачился этой проблемой =) Есть как минимум 5 вариантов автоматизации. Рассмотрим их по порядку.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->User State Migration Tool. Бесплатная утилита от Microsoft. Поставляется в комплекте Windows Automated Installation Kit. Используется из консоли. &lt;!-- raw HTML omitted -->Мануал&lt;!-- raw HTML omitted -->. У меня не получилось выполнить сохранение профиля - scanstate встал на последнем этапе на 1% и никак не реагировал.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Active Directory Migration Tool. Продукт от той же всем известной компании. Предназначен для миграции из домена в домен. Сейчас нас не интересует. &lt;!-- raw HTML omitted -->Мануал&lt;!-- raw HTML omitted -->.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->В Windows 7 можно воспользоваться стандартным средством переноса данных.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Moveuser &lt;!-- raw HTML omitted -->- тоже от MS. Работает на XP. &lt;!-- raw HTML omitted -->Версия для 7.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->User Profile Wizard&lt;!-- raw HTML omitted -->. Бесплатная утилита от ForensIT. Смогла перенести все данные и настройки. Проблем пока не замечено. &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ещё можно написать скрипт на WMI/batch/PowerShell/brainfuck/что-то_ещё - но это уже другая история.&lt;!-- raw HTML omitted -->После переноса профиля обязательно проверяйте всё - скорее всего что-то обработалось неправильно и придется доделывать руками.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Тема &lt;!-- raw HTML omitted -->на форуме, где я поднимал этот вопрос.&lt;/p></content></item><item><title>Active Directory. Некоторые вопросы безопасности.</title><link>https://bubnovd.github.io/blogger/active-directory.-%D0%BD%D0%B5%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D1%8B%D0%B5-%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81%D1%8B-%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D0%B8./</link><pubDate>Wed, 07 Dec 2011 23:43:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/active-directory.-%D0%BD%D0%B5%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D1%8B%D0%B5-%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81%D1%8B-%D0%B1%D0%B5%D0%B7%D0%BE%D0%BF%D0%B0%D1%81%D0%BD%D0%BE%D1%81%D1%82%D0%B8./</guid><description>При добавлении компьютера в домен AD необходимо его предварительное размещение (создание учетной записи компьютера в AD). Это обусловлено некоторыми аспектами безопасности.При присоединении компьютера к домену без его предварительного размещения, учетная запись компьютера создается в контейнере по умолчанию (Computers). Этот контейнер уступает по возможностям организационному подразделению и соответственно к компьютеру, включенному в этот контейнер не будут применяться объекты групповой политики, скрипты входа и выхода. Чтобы сменить контейнер по умолчанию, необходимо выполнить команду redircmp &amp;ldquo;DN_подразделения для новых объектов компьютеров&amp;rdquo; (например так redircmp ou=newcomputerou,dc=domainname,dc=com).</description><content>&lt;p>При добавлении компьютера в домен AD необходимо его предварительное размещение (создание учетной записи компьютера в AD). Это обусловлено некоторыми аспектами безопасности.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->При присоединении компьютера к домену без его предварительного размещения, учетная запись компьютера создается в контейнере по умолчанию (Computers). Этот контейнер уступает по возможностям организационному подразделению и соответственно к компьютеру, включенному в этот контейнер не будут применяться объекты групповой политики, скрипты входа и выхода. Чтобы сменить контейнер по умолчанию, необходимо выполнить команду redircmp &amp;ldquo;DN_подразделения для новых объектов компьютеров&amp;rdquo; (например так &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->redircmp ou=newcomputerou,dc=domainname,dc=com&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->). Тогда новые компьютеры по умолчанию будут создаваться в указанном подразделении.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Если учетная запись компьютера не была размещена предварительно, то Windows позволяет любому, прошедшему проверку подлинности создать объект компьютера в контейнере по умолчанию. Это является брешью в безопасности. По умолчанию любому, прошедшему проверку подлинности, разрешено создать до 10 компьютеров. Эти данные указаны в атрибуте ms-DS-MachineAccountQuota домена. Рекомендуется установить значение 0. После присвоения этому атрибуту значения 0 присоединять компьютеры к домену смогут только те пользователи, которым явным образом делегированы разрешения на присоединение к предварительно размещенным объектам компьютеров или создание новых компьютеров.&lt;/p></content></item><item><title>Windows и Active Directory. Особые объекты идентификации</title><link>https://bubnovd.github.io/blogger/windows-%D0%B8-active-directory.-%D0%BE%D1%81%D0%BE%D0%B1%D1%8B%D0%B5-%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B-%D0%B8%D0%B4%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8/</link><pubDate>Wed, 07 Dec 2011 23:34:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/windows-%D0%B8-active-directory.-%D0%BE%D1%81%D0%BE%D0%B1%D1%8B%D0%B5-%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D1%8B-%D0%B8%D0%B4%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8/</guid><description>В Windows и Active Directory поддерживаются особые объекты идентификации, членством которых в группах управляет ОС. Их нельзя добавлять в группы, просматривать и модифицировать их параметры. Однако, их можно использовать для назначения прав и разрешений доступа.Анонимный вход (Anonymous Logon). Представляет подключения к компьютеру и ресурсы, созданные без предоставления пользовательского имени и пароля. До Win Server 2k3 эта группа была членом группы Все. Начиная с 2k3 она не входит в группу Все.Прошедшие проверку (Authenticated Users).</description><content>&lt;p>В Windows и Active Directory поддерживаются особые объекты идентификации, членством которых в группах управляет ОС. Их нельзя добавлять в группы, просматривать и модифицировать их параметры. Однако, их можно использовать для назначения прав и разрешений доступа.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Анонимный вход (Anonymous Logon). &lt;!-- raw HTML omitted -->Представляет подключения к компьютеру и ресурсы, созданные без предоставления пользовательского имени и пароля. До Win Server 2k3 эта группа была членом группы Все. Начиная с 2k3 она не входит в группу Все.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Прошедшие проверку (Authenticated Users).&lt;!-- raw HTML omitted --> Представляет объекты идентификации, прошедшие проверку подлинности. Не включает запись Гость.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Все (Everyone).&lt;!-- raw HTML omitted --> Включает учетные записи Прошедшие проверку и Гость. До 2k3 включает группу Анонимный Вход.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Интерактивные (Interactive). &lt;!-- raw HTML omitted -->Представляет пользователей, получающих доступ к ресурсу и локально входящих на компьютер, содержащий ресурс, вместо доступа к ресурсу по сети. Когда пользователь получает доступ к любому ресурсу компьютера, на который вошел локально, такой пользователь автоматически добавляется в группу Интерактивные в разрешениях доступа к этому ресурсу. Эта группа также включает пользователей, вошедших на компьютер через RDP.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Сеть (Network).&lt;!-- raw HTML omitted --> Представляет пользователей, получающих доступ к ресурсу по сети. Аналогична группе Интерактивные, только вместо локального входа используется вход по сети.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Информация из книги &amp;ldquo;Настройка Active Directory Windows Server 2008&amp;rdquo;&lt;/p></content></item><item><title>Active Directory. Группы по умолчанию</title><link>https://bubnovd.github.io/blogger/active-directory.-%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B-%D0%BF%D0%BE-%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E/</link><pubDate>Wed, 07 Dec 2011 22:36:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/active-directory.-%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B-%D0%BF%D0%BE-%D1%83%D0%BC%D0%BE%D0%BB%D1%87%D0%B0%D0%BD%D0%B8%D1%8E/</guid><description>В Windows Server создаётся множество локальных групп по умолчанию. Рассмотрим те из них, которым предоставлены права, связанные с управлением Active Directory.Администраторы предприятия (Enterprise Admins) в контейнере Users корневого домена леса. Эта группа - член группы Администраторы (Administrators) в каждом домене леса; она предоставляет полный доступ к конфигурации всех контроллеров домена. Данная группа также является владельцем раздела Конфигурация каталога и имеет полный доступ к содержимому именования домена во всех доменах леса.Администраторы схемы (Schema Admins) в контейнере Users корневого домена леса.</description><content>&lt;p>В Windows Server создаётся множество локальных групп по умолчанию. Рассмотрим те из них, которым предоставлены права, связанные с управлением Active Directory.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Администраторы предприятия (Enterprise Admins) в контейнере Users корневого домена леса. &lt;!-- raw HTML omitted -->Эта группа - член группы Администраторы (Administrators) в каждом домене леса; она предоставляет полный доступ к конфигурации всех контроллеров домена. Данная группа также является владельцем раздела Конфигурация каталога и имеет полный доступ к содержимому именования домена во всех доменах леса.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Администраторы схемы (Schema Admins) в контейнере Users корневого домена леса. &lt;!-- raw HTML omitted -->Эта группа имеет полный доступ к схеме AD.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Администраторы (Administrators) в контейнере Builtin каждого домена. &lt;!-- raw HTML omitted -->Эта группа имеет полный доступ ко всем контроллерам домена и данным в контексте именования домена. Она может изменять членство во всех административных группах домена, а группа Администраторы в корневом домене леса может изменять членство в группах Администраторы предприятия, Администраторы схемы и Администраторы домена. Группа Администраторы в корневом домене леса имеет наибольшие полномочия среди групп администрирования в лесу.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Администраторы домена (Domain Admins) в контейнере Users каждого домена. &lt;!-- raw HTML omitted -->Эта группа входит в группу Администраторы своего домена. Поэтому она наследует все полномочия группы Администраторы. Кроме того, она по умолчанию входит в локальную группу Администраторы каждого рядового компьютера домена, в результате чего администраторы домена получают в свое распоряжение все компьютеры домена.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Операторы сервера (Server Operators) в контейнере Builtin каждого домена.&lt;!-- raw HTML omitted --> Эта группа может решать задачи технической поддержки на контроллерах домена. Операторы сервера могут локально входить в систему, запускать и останавливать службы, выполнять резервное копирование и восстановление, форматировать диски, создавать и удалять общие ресурсы, а также завершать работу контроллеров доменов. По умолчанию данная группа не содержит членов.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Операторы учета (Account Operators) в контейнере Builtin каждого домена.&lt;!-- raw HTML omitted --> Эта группа может создавать, модифицировать и удалять учетные записи пользователей, групп и компьютеров в любом подразделении домена (кроме Domain Controllers), а также в контейнерах Users и Computers. Операторы учета не могут модифицировать учетные записи, включенные в группы Администраторы и Администраторы домена, а также не могут модифицировать эти группы. Операторы учета также могут локально входить на контроллеры домена. По умолчанию эта группа не содержит членов.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Операторы архива (Backup Oprators) в контейнере Builtin каждого домена.&lt;!-- raw HTML omitted --> Эта группа может выполнять операции резервного копирования и восстановления на контроллерах домена, а также локально входить на КД и завершать их работу. По умолчанию не содержит членов.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Операторы печати (Print Operators)  в контейнере Builtn каждого домена. &lt;!-- raw HTML omitted -->Может обеспечивать поддержку очередей заданий печати на КД. Также может локально входить на КД и завершать их работу.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Следует с осторожностью относиться к группам по умолчанию, т.к. они как правило имеют более обширные полномочия, чем требуется для большинства делегированных сред, а также применяют защиту своих членов. Например, Операторы учета - защищенная группа. Снять защиту таких групп невозможно. Если пользователь становится членом защищенной группы, модифицируются его списки контроля доступа и они больше не наследуют разрешения своих подразделений. Поэтому рекомендуется не добавлять пользователей в группы, которые по умолчанию не содержат членов.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Информация из книги &amp;ldquo;Настройка Active Directory Windows Server 2008&amp;rdquo;.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ссылки:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->AD. Группы по умолчанию&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Локальные группы по умолчанию&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></content></item><item><title>Группы в Active Directory. Чтобы не забыть</title><link>https://bubnovd.github.io/blogger/%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B-%D0%B2-active-directory.-%D1%87%D1%82%D0%BE%D0%B1%D1%8B-%D0%BD%D0%B5-%D0%B7%D0%B0%D0%B1%D1%8B%D1%82%D1%8C/</link><pubDate>Wed, 07 Dec 2011 22:21:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D1%8B-%D0%B2-active-directory.-%D1%87%D1%82%D0%BE%D0%B1%D1%8B-%D0%BD%D0%B5-%D0%B7%D0%B0%D0%B1%D1%8B%D1%82%D1%8C/</guid><description>В AD существует несколько типов групп. По рекомендациям от МС и вообще &amp;ldquo;православно&amp;rdquo; следующее распределение:Пользователи по какому-либо признаку (географическому, бизнес-подразделения) группируются в глобальные группы.По правам доступа создаются локальные доменные группы.Пример:В компании существует отдел Бухгалтерия. Всем пользователям этого отдела требуется доступ на запись к сетевому ресурсу &amp;ldquo;Бухгалтерские документы&amp;rdquo; и доступ на печать к принтеру, находящемуся в их офисе.1. Создаём глобальную группу Бухгалтерия, членами которой будут являться сотрудники бухгалтерии.2. Создаём локальную доменную группу ACL_Buhgalteria_Share_RW.</description><content>&lt;p>В AD существует несколько типов групп. По рекомендациям от МС и вообще &amp;ldquo;православно&amp;rdquo; следующее распределение:&lt;!-- raw HTML omitted -->Пользователи по какому-либо признаку (географическому, бизнес-подразделения) группируются в глобальные группы.&lt;!-- raw HTML omitted -->По правам доступа создаются локальные доменные группы.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Пример:&lt;!-- raw HTML omitted -->В компании существует отдел Бухгалтерия. Всем пользователям этого отдела требуется доступ на запись к сетевому ресурсу &amp;ldquo;Бухгалтерские документы&amp;rdquo; и доступ на печать к принтеру, находящемуся в их офисе.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1. Создаём глобальную группу Бухгалтерия, членами которой будут являться сотрудники бухгалтерии.&lt;!-- raw HTML omitted -->2. Создаём локальную доменную группу ACL_Buhgalteria_Share_RW. Даём этой группе разрешения на чтение/запись в сетевой ресурс.&lt;!-- raw HTML omitted -->3. Создаём локальную группу домена ACL_Buhgalteria_Printer. Этой группе даём доступ на печать на нужном принтере.&lt;!-- raw HTML omitted -->4. Делаем членом двух последних групп группу Бухгалтерия.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь у глобальной группы Бухгалтерия будет доступ к принтеру и сетевой папке. Если нужно дать доступ к этим ресурсам ещё кому-либо, нужно всего лишь добавить нужную группу/пользователя в одну из групп ACL.&lt;/p></content></item></channel></rss>