<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>debian on Bubnovd</title><link>https://bubnovd.github.io/tags/debian/</link><description>Recent content in debian on Bubnovd</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 20 Feb 2013 06:41:00 +0000</lastBuildDate><atom:link href="https://bubnovd.github.io/tags/debian/index.xml" rel="self" type="application/rss+xml"/><item><title>Настройка LVM</title><link>https://bubnovd.github.io/blogger/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-lvm/</link><pubDate>Wed, 20 Feb 2013 06:41:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-lvm/</guid><description>Наконец-то я добрался до своего уютненького бложика. Позже напишу для истории причину столь долгого перерыва, а сейчас только Linux, только хардкор.Итак, сегодня я наконец-то исполнил свои давнишние планы и поднял LVM на любимом Debian&amp;rsquo;e, не включавшемся последние полгода. Здесь и опишу как это было.Поехали. Имеем пингвина (в моем случае Debian). У меня 4 жестких диска. fdisk -l и /etc/fstab говорят вот о чем:sda 320 GB - sda1 /boot - sda2 / - sda3 /home - sda4 /swap sdb 160 GB - sdb1 /home/virtual/virtual2 - sdb2 - ntfs раздел Windows sdc 160 GB - sdc1 /home/virtual/virtual3 - sdc2 - ntfs раздел Windows sdd 1000 GB - sdd1 /home/video - sdd2 - не используется - sdd3 - не используетсяНачал с простого знакомства с LVM.</description><content>&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Наконец-то я добрался до своего уютненького бложика. Позже напишу для истории причину столь долгого перерыва, а сейчас только Linux, только хардкор.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Итак, сегодня я наконец-то исполнил свои давнишние планы и поднял LVM на любимом Debian&amp;rsquo;e, не включавшемся последние полгода. Здесь и опишу как это было.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Поехали. Имеем пингвина (в моем случае Debian). У меня 4 жестких диска. fdisk -l и /etc/fstab говорят вот о чем:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->sda 320 GB&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sda1 /boot&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sda2 /&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sda3 /home&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sda4 /swap&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> sdb 160 GB&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sdb1 /home/virtual/virtual2&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sdb2 - ntfs раздел Windows&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> sdc 160 GB&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sdc1 /home/virtual/virtual3&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sdc2 - ntfs раздел Windows&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> sdd 1000 GB&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sdd1 /home/video&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sdd2 - не используется&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> - sdd3 - не используется&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Начал с простого знакомства с LVM. Решил один диск на 160 GB оставить под винду, второй на 160 - в LVM и зашифровать (тоже интересно покопаться с этой штукой), а 1000 GB и 360 GB объединить и разбить на несколько разделов. С количеством разделов пока не определился.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Для настройки LVM необходимо установить пакет lvm2:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> sudo aptitude install lvm2&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Все дальнейшие операции проводятся из под рута (делаем su).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Создаём физические разделы:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> pvcreate /dev/sdb&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Сразу оно не завелось. Поэтому готовим хард:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> dd if-/dev/zero of=/dev/sdb bs=1k count=1k&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> blockdev &amp;ndash;rereadpt /dev/sdb&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> fdisk /dev/sdb&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> -t 0x8e&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> -w&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> pvcreate /dev/sdb&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->То же самое со вторым диском.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Создаём группу томов:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> vgcreate vg00 /dev/sdb /dev/sdd&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->И, наконец, на созданной группе создаем логические тома (разделы):&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> lvcreate -L 1000G -n lv00data&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->lv00data - название логического тома. Может быть любым.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->На этом работа с LVM закончена и начинается работа с файловой системой. Форматируем в нужню ФС. Я решил отформатировать раздел /data в XFS (т.к. именно эта ФС хорошо работает с большими фалами. Да и поковыряться с новой для меня ФС интересно). Из коробки Debian не умеет работать с этой ФС. Поэтому пришлось установить пару пакетов:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> aptitude install xfsprogs xfsdump&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Форматируем&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> mkfs.xfs /dev/vg00/lv00data&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Те же самые операции с остальными разделами.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->После перезагрузки тома из LVM не захотели монтироваться по UUID, хотя в последнем релизе Debian монтирование дисков происходит именно по UUID. Когда поправил /etc/fstab по названию тома - всё пришло в норму.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ничего нового или оригинального в этом посте нет - просто на память. Вся инфа отсюда:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->xgu&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->habr&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Если не уверены в своих силах - сделайте бэкап данных. Учтите, что диски, используемые в LVM форматируются и таблица разделов на них сносится. Для меня это было первым шагом в LVM, дальше хочу перенести всю систему туда и зашифровать один раздел. Работающую систему переносить страшно, поэтому нутром чую, что следующий пост будет про бэкапы =)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->UPD 29-05-2013:&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->XFS делайте только если оно вам действительно надо&lt;!-- raw HTML omitted -->. Т.е. если на 3 ТБ винте храните фильмы BD качества или большие БД. В большинстве случаев на домашней машине эта ФС не нужна. Запомните, она очень капризна и рассыпется практически без возможности восстановления при любом удобном случае. Например, моя гостья не нашла в меню выключение компьютера и просто дернула его из розетки. Хорошо хоть ничего особо ценного на разделе с XFS не было. Восстанавливать даже не пытался - времени не было.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;/p></content></item><item><title>Linux Server. 2 Настройка iptables</title><link>https://bubnovd.github.io/blogger/linux-server.-2-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-iptables/</link><pubDate>Thu, 25 Aug 2011 01:49:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/linux-server.-2-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-iptables/</guid><description>Займёмся правильной настройкой фаервола. На самом деле пакетный фильтр в Linux носит имя netfilter. А iptables - утилита для его настройки. Правильная настройка любого фаервола ведется по правилу: &amp;ldquo;Что не разрешено - то запрещено&amp;rdquo;. То есть сначала нужно закрыть всё.Все действия выполняются из под суперпользователя. sudo suЗакрываем всё:iptables -P INPUT DROPiptables -P FORWARD DROPiptables -P OUTPUT DROPЕсли нужно, чтобы на машину ходили пинги, нужно разрешить icmp-пакеты:iptables -A INPUT -p icmp -j ACCEPTiptables -A OUTPUT -p icmp -j ACCEPTВ этом случае пинги будут ходить отовсюду.</description><content>&lt;p>Займёмся правильной настройкой фаервола. На самом деле пакетный фильтр в Linux носит имя netfilter. А iptables - утилита для его настройки. Правильная настройка любого фаервола ведется по правилу: &amp;ldquo;Что не разрешено - то запрещено&amp;rdquo;. То есть сначала нужно закрыть всё.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Все действия выполняются из под суперпользователя. sudo su&lt;!-- raw HTML omitted -->Закрываем всё:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -P INPUT DROP&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -P FORWARD DROP&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -P OUTPUT DROP&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Если нужно, чтобы на машину ходили пинги, нужно разрешить icmp-пакеты:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A INPUT -p icmp -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A OUTPUT -p icmp -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->В этом случае пинги будут ходить отовсюду. Чтобы разрешить пинг только с конкретных ip/подсетей, пишем следующее (предыдущее не пишем):&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A INPUT -s 192.168.0.100 -p icmp -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A OUTPUT -d 192.168.0.100 -p icmp -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->В этом случае 192.168.0.100 - ip машины, с которой можно пинговать. Чтобы задать подсеть, достаточно написать 192.168.0.0/24, где 24 - маска подсети (можно писать 255.255.255.0).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Открытие портов производим по такому же принципу. Если конкретный адрес/подсеть не указаны, порты откроются для всех. Не забываем, что если в цепочке INPUT указывается s (source), то в OUTPUT - d (destination), и наоборот. Откроем 22 порт для 192.168.0.100:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A INPUT -s 192.168.0.100 -p tcp &amp;ndash;dport 22 -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A OUTPUT -d 192.168.0.100 -p tcp &amp;ndash;sport 22 -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Не забываем открыть DNS порты, иначе сами сможем ходить в нет только по айпишникам:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A INPUT -p udp &amp;ndash;sport 53 -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A OUTPUT -p udp &amp;ndash;dport 53 -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Проброс портов:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Задача:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->при попытке соединения с сервером (192.168.0.104) из локальной сети  (c IP 192.168.0.100) на порт RDP (3389) - соединять клиента с Windows-сервером (192.168.0.21).&lt;!-- raw HTML omitted -->Тут нужен &lt;!-- raw HTML omitted -->NAT&lt;!-- raw HTML omitted -->. Сначала нужно включить его поддержку&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->echo net.ipv4.ip_forward=1 &amp;gt; /etc/sysctl.conf&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Перезагружаемся.&lt;!-- raw HTML omitted -->Теперь пишем правила:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -t nat -A PREROUTING &amp;ndash;dst 192.168.0.104 -p tcp &amp;ndash;dport 3389 -j DNAT &amp;ndash;to-destination 192.168.0.21&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Этой командой мы говорим фаерволу, чтобы он добавил в таблицу nat в цепочку PREROUTING правило, которое в пакетах, идущих к машине с фаерволом (192.168.0.104) на порт 3389, заменял адрес назначения пакетов с 192.168.0.104 на 192.168.0.21.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -t nat -A POSTROUTING -p tcp &amp;ndash;dst 192.168.0.21 &amp;ndash;dport 3389 -j SNAT &amp;ndash;to-source 192.168.0.104&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Это пишем уже в цепочку POSTROUTING (т.е. после принятия решения о маршрутизации) таблицы nat, в котором говорим, что пакеты, идущие от нас (192.168.0.104) к 192.168.0.21 меняли адрес отправителя на наш (192.168.0.104). Так как сейчас у них адрес отправителя (192.168.0.100 или адрес той машины, с которой мы хотим подключиться к RDP).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Ещё два правила в таблицу filter:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A FORWARD &amp;ndash;dst 192.168.0.21 &amp;ndash;src 192.168.0.0/24 -p tcp &amp;ndash;dport 3389  -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -A FORWARD &amp;ndash;src 192.168.0.0/24 &amp;ndash;dst 192.168.0.21 -p tcp &amp;ndash;dport 3389  -j ACCEPT&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Эти правила разрешают прохождение пакетов из локалки 192.168.0.0/24 на Windows-сервер (192.168.0.21) на порт 3389 и обратно.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Пока что у меня в фаерволе следующие правила:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Chain INPUT (policy DROP)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->target     prot opt source               destination&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     icmp &amp;ndash;  anywhere               anywhere&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     udp  &amp;ndash;  anywhere               anywhere            udp spt:domain&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  192.168.0.100        anywhere            tcp dpt:ssh&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  anywhere                anywhere            tcp spt:www&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  192.168.0.100        anywhere            tcp dpt:www&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Chain FORWARD (policy DROP)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->target     prot opt source               destination&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  192.168.0.0/24       192.168.0.21        tcp dpt:3389&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  192.168.0.21         192.168.0.0/24      tcp spt:3389&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Chain OUTPUT (policy DROP)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->target     prot opt source               destination&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     icmp &amp;ndash;  anywhere             anywhere&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     udp  &amp;ndash;  anywhere             anywhere              udp dpt:domain&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  anywhere             192.168.0.100       tcp spt:ssh&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  anywhere             anywhere               tcp dpt:www&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ACCEPT     tcp  &amp;ndash;  anywhere             192.168.0.100       tcp spt:www&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Chain PREROUTING (policy ACCEPT)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->target     prot opt source               destination&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->DNAT       tcp  &amp;ndash;  anywhere             192.168.0.104       tcp dpt:3389 to:192.168.0.21&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Chain OUTPUT (policy ACCEPT)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->target     prot opt source               destination&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Chain POSTROUTING (policy ACCEPT)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->target     prot opt source               destination&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->SNAT       tcp  &amp;ndash;  anywhere             192.168.0.21        tcp dpt:3389 to:192.168.0.104&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Мануалы:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a href="http://easylinux.ru/node/190/">http://easylinux.ru/node/190/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a href="http://www.opennet.ru/docs/RUS/iptables/">http://www.opennet.ru/docs/RUS/iptables/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a href="http://www.it-simple.ru/?p=2250">http://www.it-simple.ru/?p=2250&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->UPD: &lt;!-- raw HTML omitted -->Для совсем начинающих: можете задать вопросы в комментах или в личку. Обязательно отвечу и постараюсь помочь с простыми решениями (в сложных сам не шарю)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->UPD2:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> Недавно &lt;!-- raw HTML omitted -->здесь &lt;!-- raw HTML omitted -->выложили ещё один мануал&lt;!-- raw HTML omitted -->&lt;/p></content></item><item><title>Linux Server. 1 Поднимаем сервак на Debian по шагам</title><link>https://bubnovd.github.io/blogger/linux-server.-1-%D0%BF%D0%BE%D0%B4%D0%BD%D0%B8%D0%BC%D0%B0%D0%B5%D0%BC-%D1%81%D0%B5%D1%80%D0%B2%D0%B0%D0%BA-%D0%BD%D0%B0-debian-%D0%BF%D0%BE-%D1%88%D0%B0%D0%B3%D0%B0%D0%BC/</link><pubDate>Sun, 13 Mar 2011 10:49:00 +0000</pubDate><guid>https://bubnovd.github.io/blogger/linux-server.-1-%D0%BF%D0%BE%D0%B4%D0%BD%D0%B8%D0%BC%D0%B0%D0%B5%D0%BC-%D1%81%D0%B5%D1%80%D0%B2%D0%B0%D0%BA-%D0%BD%D0%B0-debian-%D0%BF%D0%BE-%D1%88%D0%B0%D0%B3%D0%B0%D0%BC/</guid><description>Будем экспериментировать с Debian 6.0 Squeeze. Пост не рассматривается как руководство к действию - просто эксперименты с Debian&amp;rsquo;ом. Попробуем поднять все известные нужные/не очень сервисы. Постараюсь подробно и по шагам.Вообще, если это будет первый опыт с UNIX-подобными системами, то рекомендую заюзать Ubuntu - она попроще и дружелюбней к новичкам. В Debian&amp;rsquo;е многое придется делать руками. А в целом руководство должно подойти и для Ubuntu.Сначала несколько самых важных команд:cd - ходить по папкам (подняться на уровень выше cd .</description><content>&lt;p>Будем экспериментировать с Debian 6.0 Squeeze. Пост не рассматривается как руководство к действию - просто эксперименты с Debian&amp;rsquo;ом. Попробуем поднять все известные нужные/не очень сервисы. Постараюсь подробно и по шагам.&lt;!-- raw HTML omitted -->Вообще, если это будет первый опыт с UNIX-подобными системами, то рекомендую заюзать Ubuntu - она попроще и дружелюбней к новичкам. В Debian&amp;rsquo;е многое придется делать руками. А в целом руководство должно подойти и для Ubuntu.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Сначала несколько самых важных команд:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->cd&lt;!-- raw HTML omitted --> - ходить по папкам (подняться на уровень выше cd ..),&lt;!-- raw HTML omitted --> ls &lt;!-- raw HTML omitted -->- просмотреть содержимое папки, &lt;!-- raw HTML omitted -->nano&lt;!-- raw HTML omitted --> - удобный текстовый редактор,&lt;!-- raw HTML omitted --> ps ax &lt;!-- raw HTML omitted -->- просмотреть все запущенные процессы, &lt;!-- raw HTML omitted -->apt&lt;!-- raw HTML omitted -->- утилита для работы с пакетами ПО (apt-get install packet - установка пакета(программы)).&lt;!-- raw HTML omitted -->Ещё нужно понять, что Линукс - не винда, и структура файловой системы здесь СОВСЕМ другая, хотя когда привыкаешь, понимаешь, что это достоинство Линукса. О файловой системе написано довольно много, поэтому не буду повторяться.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1. Установка системы. &lt;!-- raw HTML omitted -->Ничего сверхсложного. Просто следуем рекомендациям установщика. Особо продвинутые могут вынести на разные диски разделы /home, /var, /usr и т.д. Из предложенных вариантов доп. софта отмечаем только стандартные утилиты, т.к. хочется сервисы поднимать ручками и увеличивать свои скиллы.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2. Настройка сети. &lt;!-- raw HTML omitted -->Так как у нас сервер, то в нем должно быть минимум 2 сетевых карточки =) Условимся, что eth1 &amp;ldquo;смотрит&amp;rdquo; в инет, а eth0 - в локалку. Да, в Линуксах сетевые интерфейсы называются именно так - eth0, eth1 и т.д. Ещё есть lo, ppp0, но об этом позже.&lt;!-- raw HTML omitted -->Настройка сети сводится к редактированию файла &lt;!-- raw HTML omitted -->/etc/network/interfaces&lt;!-- raw HTML omitted --> . Проще всего это сделать с помощью редактора nano. Делать все нужно с правами суперпользователя, для этого нужно набрать su и ввести пароль, заданный на этапе установки. Набираем в терминале nano /etc/network/interfaces и прописываем настройки. Там уже должны быть строки вроде:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># This file describes the network interfaces available on your system&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># and how to activate them. For more information, see interfaces(5).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --># The loopback network interface&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->auto lo&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iface lo inet loopback&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Всё, что идет после знака # - комментарии, они игнорируются системой. lo - это петля, чтобы система могла видеть себя по адресам 127.0.0.1 и localhost. Больше об этом ничего не скажу - сам толком не знаю.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Следующими строками добавляем примерно следующее:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->auto eth0&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iface eth0 inet static&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        address 192.168.0.100&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        netmask 255.255.255.0&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->auto eth1&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iface eth1 inet static&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        address 192.168.44.223&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        netmask 255.255.255.0&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        gateway 192.168.44.1&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Думаю, здесь всё ясно - address - это наш IP-адрес, netmask - маска, gateway - шлюз. static - поясняет системе, что адрес присваивается статично. Если у вас dhcp, то вместо statiс нужно написать dhcp. Ну естественно циферки нужно вбить свои =) В винде нам бы пришлось ребутиться, но у нас же линукс - тут можно перезапустить сетевую подсистему без перезагрузки - /etc/init.d/networking restart Но можно и ребутнуться reboot&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Адреса DNS-серверов прописаны в файле /etc/resolv.conf Если у вас его нет просто создайте его: &lt;!-- raw HTML omitted -->nano /etc/resolv.conf &lt;!-- raw HTML omitted -->и пропишите сервера в виде: &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->nameserver xxx.xxx.xxx.xxx&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->nameserver xxx.xxx.xxx.xxx&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3. Поднимаем инет. &lt;!-- raw HTML omitted -->У многих провайдеров интернет раздается посредством vpn-соединения. Чтобы получить сию благодать придется попариться =) Нужно узнать у провайдера настройки для UNIX-подобных систем. Мне пришлось сделать следующее:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3.1. Установить&lt;!-- raw HTML omitted --> pptpclient&lt;!-- raw HTML omitted -->. Его можно найти на диске с дистрибутивом.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3.2. Настроить маршрутизацию:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->route del default&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->route add -net xxx.xxx.xxx.xxx netmask 255.255.255.0 gw xxx.xxx.xxx.xxx eth1&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Здесь xxx.xxx.xxx.xxx - адрес, предложенный провайдером.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3.3. Настроить pp&lt;!-- raw HTML omitted -->tp - клиента как предлагает&lt;!-- raw HTML omitted --> провайдер. Файл /etc/ppp/options:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->local&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->lock&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->nodetach&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->mtu 1512&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->mru 1512&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->require-mppe-40&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->require-mppe-128&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->require-mppe&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->lcp-echo-interval 30&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->lcp-echo-failure 5&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->require-mschap-v2&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->refuse-pap&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->refuse-chap&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->refuse-mschap&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->refuse-eap&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->defaultroute&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->user ВАШ_ЛОГИН&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->noauth&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Файл /etc/ppp/chap-secrets:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ВАШ_ЛОГИН * ВАШ_ПАРОЛЬ *&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Поменять права на chap-secrets: &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->chmod 400 chap-secrets&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3.4. Набрать в терминале pptp vpn.server.ru и всё заработало.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3.5. Будем надеяться, что у вас тоже всё получилось. Тогда можно написать скрипт для автоподнятия инета или перейти к обновлению. &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Чтобы инет поднимался автоматически после старта системы нужно все команды для поднятия инета завернуть в скрипт.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> nano /usr/local/bin/pptp-run.sh&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->#!/bin/bash &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->route del default      #первая команда из п. 3.2&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->#вторая команда и т.д.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->LOG=&amp;quot;/var/log/pptp-run.log&amp;quot;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->while true; do&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        echo -e &amp;ldquo;\n=========================================\n &lt;code>date&lt;/code>&amp;rdquo; &amp;gt;&amp;gt; $LOG&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        /usr/sbin/pptp vpn.server.ru &amp;gt;&amp;gt; $LOG&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->        sleep 10;&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->done&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Как видно из скрипта, он логирует свою работу, а значит можно увидеть как отработал скрипт в файле /var/log/pptp-run.log Теперь нужно дать скрипту права на выполнение, потому что сейчас система видит его как простой текстовый файл: &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->chmod +x pptp-run.sh&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Осталось прописать скриптик в автозагрузку.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> nano /etc/rc.loca&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->l&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Перед строкой exit 0 пишем путь до скрипта:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->/usr/local/bin/pptp-run.sh&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4. Обновляем систему.&lt;!-- raw HTML omitted --> Обновления выкачиваются из репозитариев, по умолчанию они не прописаны в системе.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4.1.  Поэтому нужно их прописать.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->nano /etc/apt/sources.list&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Если не собираемся ничего ставить с диска, то закомментируем строки&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->deb cdrom:[Debian GNU/Linux 6.0.0 &lt;em>Squeeze&lt;/em> - Official i386 CD Binary-1 20110205-17:27]/ squeeze main&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->deb cdrom:[Debian GNU/Linux 6.0.0 &lt;em>Squeeze&lt;/em> - Official i386 CD Binary-1 20110205-17:27]/ squeeze main&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Также нужно добавить репозитарии:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->#Offical Debian repository&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->deb &lt;a href="http://ftp.debian.org/debian/">http://ftp.debian.org/debian/&lt;/a> squeeze main non-free contrib&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->deb-src &lt;a href="http://ftp.debian.org/debian/">http://ftp.debian.org/debian/&lt;/a> squeeze main non-free contrib&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->#Official Debian repository Russian mirrors&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->deb &lt;a href="http://ftp.ru.debian.org/debian/">http://ftp.ru.debian.org/debian/&lt;/a> squeeze main non-free contrib&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->deb-src &lt;a href="http://ftp.ru.debian.org/debian/">http://ftp.ru.debian.org/debian/&lt;/a> squeeze main non-free contrib&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4.2. Обновляем списки репозитариев: apt-get update&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4.3. Обновляем систему: apt-get upgrade&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь можно заняться работой =))&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5. Установка софта первой необходимости.&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5.1. Чтобы можно было удаленно работать с сервом нужен ssh-сервер.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->apt-get install openssh-server &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Теперь можно работать с серваком с любого другого компа, подключенного к сети через ssh-клиент. В винде это PuTTY.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5.2. Если боитесь командной строки, рекомендую поставить файловый менеджер mc (Midnight Commander - аналог виндового Norton Commaner, FAR и т.д.). &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->apt-get install mc &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Запускается установленный ФМ командой mc&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5.3. Работать в системе с правами суперпользователя (su) небезопасно. Можно поставить sudo. Она позволяет не входить в систему под суперюзером, а единожды выполнять команду с его правами, например sudo apt-get install. Как ставить софт думаю уже понятно, поэтому больше не буду повторяться (su; apt-get install имя_пакета). Без небольшой настройки sudo не заработает. Нужно подредактировать файлик /etc/sudoers (как редактировать надеюсь тоже ясно: su; nano имя_файла; Ctrl+X; Y). Добавляем строку:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->имя_пользователя   &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->ALL=(ALL) ALL&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Можно сделать ещё проще: добавить нужного юзера в группу sudo: usermod&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->username&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->-aG  sudo&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5.4. Для тех, у кого фобия командной строки рекомендую копать в сторону webmin. Но это не наш путь - с ним вы толком ничего не поймете, а лишь будете знать что можно сделать с линухом. Для экспериментов да похвастаться перед одноклассниками (превед школота!) что &amp;ldquo;Я паставил Линух!&amp;rdquo; сойдет, но не больше!&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5.5. Продвинутый диспетчер процессов - htop&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->6. Настройка простейшего роутера.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Наш роутер будет передавать весь траффик с интернета в локальную сеть и обратно. Для этого нужно использовать NAT. Проптсываем в настройках фаервола натинг:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables -t nat -A POSTROUTING -o eth1 -j MASQUERAD&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->E&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Но это ещё не всё. Для работы натинга необходимо разрешить пересылку пакетов в ядре. В файле /etc/sysctl.conf нужно раскомментировать строку&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->net.ipv4.ip_forward=1&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted --> .&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->После перезагрузки настройки фаервола сбросятся, поэтому следует сохранить цепочки фаера:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->iptables-save &amp;gt; /etc/iptables-save&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->И прописать восстановление этих настроек при загрузке системы. В файл /etc/network/interfaces &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->добавить строку:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->up iptables-restore &amp;lt; /etc/iptables-save&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->К&lt;!-- raw HTML omitted -->онечно это простейший роутер, без ограничения траффика, проверки на вирусы и прочего, но он работает =)&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->7. Настройка Wi-Fi &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Скомпилировано из этого:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1. &lt;!-- raw HTML omitted -->&lt;a href="http://bagow.org/nastrojka-wi-fi-v-debian/">http://bagow.org/nastrojka-wi-fi-v-debian/&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2. &lt;!-- raw HTML omitted -->&lt;a href="http://gettoknowlinux.blogspot.com/2010/07/wifi-access-point-debian-atheros.htm">http://gettoknowlinux.blogspot.com/2010/07/wifi-access-point-debian-atheros.htm&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3. &lt;!-- raw HTML omitted -->&lt;a href="http://sudouser.com/linux-v-roli-wi-fi-tochki-dostupa.html">http://sudouser.com/linux-v-roli-wi-fi-tochki-dostupa.html&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4. &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;a href="http://forum.ubuntu.ru/index.php?topic=61834.0">http://forum.ubuntu.ru/index.php?topic=61834.0&lt;/a>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->l&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Можно  сделать наш серв точкой доступа и раздавать инет на мобильные устройства. Для этого нужна беспроводная сетевая карточка. Нужно узнать её производителя и, желательно, чип, на котором она работает. У меня была сетевушка D-Link DWA-510 (RaLink RT2561/RT61). Чип можно узнать на сайте производителя или у гугла на крайняк. &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Моя сетевушка  без проблем определилась системой&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Чёт поздно уже&amp;hellip; Продолжение следует&amp;hellip;&amp;hellip;. &lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->===================================================================&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->На этом пока всё. Скоро будем копать дальше. В планах:&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->1. Правильная настройка iptables.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->2. Настройка файл-сервера с разными уровнями доступа.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->3. Квотирование диска.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->4. Настройка контроллера домена.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->5. Настройка dhcp-сервера.&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->6. Настройка прокси-сервера. И различных плюшек для него (статистика, баннерорезалка, антивирус, прозрачность).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->7. Настройка Asterisk (IP-телефония).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->8. Настройка LAMP (Linux, Apache, MySQL, PHP).&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->&lt;/p></content></item></channel></rss>